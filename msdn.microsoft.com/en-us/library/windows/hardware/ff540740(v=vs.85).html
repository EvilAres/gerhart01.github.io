<!DOCTYPE html>

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en">
    
<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/ff540740(v=vs.85).aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><link rel="canonical" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540740(v=vs.85).aspx" />
        <title>Completing I/O Requests (Windows Drivers)</title>




<meta name="DCS.dcsuri" content="/en-us/library/windows/hardware/ff540740(d=default,l=en-us,v=vs.85).aspx" />

<meta name="NormalizedUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540740(d=default,l=en-us,v=vs.85).aspx" />

<meta name="ms.normalizedurl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540740(d=default,l=en-us,v=vs.85).aspx" />

<meta name="VotingContextUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540740(d=default,l=en-us,v=vs.85).aspx" />

<meta name="MN" content="BF1CA93B-9:38:00 AM" />

<meta name="Search.ShortId" content="ff540740" />

<meta name="ms.shortidmsdn" content="ff540740" />

<meta name="Ms.Locale" content="en-us" />







        
    <link rel="shortcut icon" href="http://msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Winlogo_favicon.ico" />

    <link rel="stylesheet" type="text/css" href="http://i3.msdn.microsoft.com/Combined.css?resources=0:Topic,0:CodeSnippet,0:ExpandableCollapsibleArea,1:CommunityContent,0:TopicNotInScope,0:FeedViewerBasic,0:ImageSprite,2:Header,2:sprite,1:Toc,1:LibraryMemberFilter,2:Footer,3:DetailedLinkList,3:LinkList,4:Windows;/Areas/Epx/Content/Css:0,/Areas/Library/Content:1,/Areas/Epx/Themes/Windows/Content:2,/Areas/Epx/Themes/Base/Content:3,/Areas/Library/Themes/Windows/Content:4&amp;amp;hashKey=E1AF301680B6D838738C2F52E9149624" /></head>
    <body class="library ">
        <div id="page">
            
            
  
            
    
    

    <div id="ux-header" class=" ltr">
        <div id="headerContainer">
            <div id="logoAndSearchBox">
                <div id="logo">
                    <a href="http://msdn.microsoft.com/windows/" title="Windows"><img alt="Windows" src="http://i.msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Windows_logo.png"></img></a>       
                </div>
              
        <div id="selectedTab">
            <a class="dropDownToggle" href="javascript:void(0);">Dev Center - Hardware</a>    
        </div>
    <div id="toclevel1_menu" style="display: none;">
        <ul>
                <li><a href="http://msdn.microsoft.com/windows/" title="Dev Center Home">Dev Center Home</a></li>
                <li><a href="http://msdn.microsoft.com/windows/apps/" title="Windows Store apps">Windows Store apps</a></li>
                <li><a href="http://msdn.microsoft.com/ie/" title="Internet Explorer">Internet Explorer</a></li>
                <li><a href="http://msdn.microsoft.com/windows/desktop/" title="Desktop">Desktop</a></li>
                <li><a href="http://msdn.microsoft.com/windows/hardware/" title="Hardware">Hardware</a></li>
        </ul>
        <div style="clear: both"></div>
    </div> 

                
                  

        <div class="SearchBox">   
            <form id="HeaderSearchForm" name="HeaderSearchForm" method="get" onsubmit="return Epx.Controls.SearchBox.searchBoxOnSubmit(this);">
            <input id="HeaderSearchTextBox" name="query" type="text" maxlength="200" onfocus="Epx.Controls.SearchBox.watermarkFocus(event, this.title)" onblur="Epx.Controls.SearchBox.watermarkBlur(event, this.title)" />            
            <button id="HeaderSearchButton" value="" type="submit" class="header-search-button"></button>
            </form>
         
                
                 
    
        </div>

                <div class="Clear"></div>
            </div>
            <div class="Clear"></div>
            <div class="ux-internav">
    <div class="toclevel2"> 
            <a class="normal" href="https://sysdev.microsoft.com/en-us/hardware/" title="Dashboard">Dashboard</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg507680" title="Get Started ">Get Started </a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg462970" title="Design">Design</a>
            <a class="active" href="http://msdn.microsoft.com/windows/hardware/ff960953" title="Develop">Develop</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg463010" title="Certify">Certify</a>
    </div>
    <div class="clear"></div>

            </div>
            <div id="signIn">

<a class="scarabLink" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=12&amp;ct=1395074280&amp;rver=6.0.5276.0&amp;wp=MCLBI&amp;wlcxt=MSDN%24MSDN%24MSDN&amp;wreply=http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fff540740%2528v%3dvs.85%2529.aspx&amp;lc=1033&amp;id=254354&amp;mkt=en-US" title="Sign in">Sign in</a></div>

    

        </div>  
        <div id="blackBar">
    <div class="toclevel3"> 
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/gg454504" title="Systems">Systems</a>
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/gg454505" title="Devices">Devices</a>
            <a class="active" href="http://msdn.microsoft.com/library/windows/hardware/ff557573" title="Drivers">Drivers</a>
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/ff551063(v=vs.85).aspx" title="Debugging">Debugging</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg454513" title="Downloads">Downloads</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/dn433227.aspx" title="Samples">Samples</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg454517" title="Community">Community</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/dn550976" title="Archives">Archives</a>
    </div>
    <div class="clear"></div>

        </div>
    </div>


        
            <div id="body">
                







    <div id="leftNav">



<div id="tocnav">
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff557565(v=vs.85).aspx" id="dn279975_VS.85_en-us" mtpsaliasid="" mtpsassetid="a3243ae3-1bc3-42d5-8975-b0588ae94dba_VS.85_en-us" mtpsshortid="ff557565_VS.85_en-us" title="Windows Driver Frameworks">Windows Driver Frameworks</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/dn265580(v=vs.85).aspx" id="dn279976_VS.85_en-us" mtpsaliasid="" mtpsassetid="46009B18-7EDD-4E58-B561-36775A335B87_VS.85_en-us" mtpsshortid="dn265580_VS.85_en-us" title="WDF Driver Development Guide">WDF Driver Development Guide</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/dn265584(v=vs.85).aspx" id="dn280017_VS.85_en-us" mtpsaliasid="" mtpsassetid="557EF30E-3B85-49BE-BA0B-97734EA2E677_VS.85_en-us" mtpsshortid="dn265584_VS.85_en-us" title="Handling I/O Requests">Handling I/O Requests</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff542962(v=vs.85).aspx" id="dn383700_VS.85_en-us" mtpsaliasid="" mtpsassetid="564f3600-4784-4a37-ac13-38338c38a9d2_VS.85_en-us" mtpsshortid="ff542962_VS.85_en-us" title="Framework Request Objects">Framework Request Objects</a>            </div>
            <div class="toclevel1" data-toclevel="1">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544525(v=vs.85).aspx" id="dn605842_VS.85_en-us" mtpsaliasid="" mtpsassetid="90b1cc51-da40-45c1-9d6c-57f637f474d9_VS.85_en-us" mtpsshortid="ff544525_VS.85_en-us" title="Processing I/O Requests">Processing I/O Requests</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544567(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Receiving I/O Requests">Receiving I/O Requests</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544592(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Requeuing I/O Requests">Requeuing I/O Requests</a>            </div>
            <div class="toclevel2 current" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540740(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Completing I/O Requests">Completing I/O Requests</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540733(v=vs.85).aspx" id="dn605843_VS.85_en-us" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Canceling I/O Requests">Canceling I/O Requests</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff541883(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Forwarding I/O Requests">Forwarding I/O Requests</a>            </div>
</div>
        

        

        
        
        <div id="toc-resizable-ew" class="toc-resizable-ew"></div>
        
    </div>
<div id="content" class="content">







        

<div class="topic" xmlns="http://www.w3.org/1999/xhtml">
  <h1 class="title">Completing I/O Requests</h1>
  
  <div id="mainSection">
<div class="clsServerSDKContent">

</div>
<h2><a id="ddk_completing_i_o_requests_df"></a><a id="DDK_COMPLETING_I_O_REQUESTS_DF"></a></h2>
<p>Every framework-based driver must eventually complete every I/O request that it receives from the framework. Drivers complete requests by calling the request object's <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549948(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCompleteWithInformation</strong></a>, or <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549949(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCompleteWithPriorityBoost</strong></a> method. </p>
<h3><a id="when_to_complete_a_request"></a><a id="WHEN_TO_COMPLETE_A_REQUEST"></a>When to Complete a Request</h3>
<p>A driver must complete a request when it determines that one of the following cases is true:</p>
<ul>
<li>
<p>The requested I/O operation has finished successfully.</p>
</li>
<li>
<p>The requested I/O operation was started but failed before it finished.</p>
</li>
<li>
<p>The requested I/O operation is not supported, or was not valid at the time it was received, and could not be started.</p>
</li>
<li>
<p>The requested I/O operation was canceled.</p>
</li>
</ul>
<p>If the driver services the I/O request by creating I/O activity on the device, the driver typically calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a> from its <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff541721(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">EvtInterruptDpc</em></a> or <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff541683(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">EvtDpcFunc</em></a> callback function.</p>
<p>If the driver receives an unsupported or otherwise invalid request, it typically calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a> from the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544583(v=vs.85).aspx">request handler</a> that received the request.</p>
<p>If the I/O operation was <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540733(v=vs.85).aspx">canceled</a>, the driver typically calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a> from its <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff541817(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">EvtRequestCancel</em></a> callback function.</p>
<p>If the driver <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff541883(v=vs.85).aspx">forwards</a> the I/O request to an <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff545479(v=vs.85).aspx">I/O target</a>, the driver completes the request after the I/O target completes the request, as follows:</p>
<ul>
<li>
<p>If your driver forwards the I/O request <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544616(v=vs.85).aspx">synchronously</a> to the I/O target, the driver's call to the I/O target returns only after a lower-level driver has completed the request (unless an error occurs). After the I/O target returns, your driver must call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>.</p>
</li>
<li>
<p>If your driver forwards the I/O request <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544613(v=vs.85).aspx">asynchronously</a>, you will want your driver to be notified when a lower-level driver completes the request. If your driver registers a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function, the framework calls this callback function after the I/O target completes the request. The <em>CompletionRoutine</em> callback function typically calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>.</p>
</li>
</ul>
<p>To register a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function, the driver must call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550030(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestSetCompletionRoutine</strong></a> before it forwards the I/O request to an I/O target. </p>
<p>If your driver does not need to be notified when an I/O target completes an asynchronously forwarded I/O request, the driver does not have to register a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function. Instead, the driver can set the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff552493(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WDF_REQUEST_SEND_OPTION_SEND_AND_FORGET</strong></a> flag when calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550027(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestSend</strong></a>. In this case the driver does not call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>.</p>
<p>A driver does not complete an I/O request that it has created by calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549951(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCreate</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549953(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCreateFromIrp</strong></a>. Instead, the driver must call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548734(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfObjectDelete</strong></a> to delete the request object, typically after an I/O target has completed the request.</p>
<p>For example, a driver might receive a read or write request for an amount of data that is larger than the driver's I/O targets can handle at one time. The driver must divide the data into several smaller requests and send these smaller requests to one or more I/O targets. Techniques for handling this situation include:</p>
<ul>
<li>
<p>Calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549951(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCreate</strong></a> to create a single additional request object that represents a smaller request. </p>
<p>The driver can send this request synchronously to an I/O target. The smaller request's <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function can call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550026(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestReuse</strong></a> so that the driver can reuse the request and send it to the I/O target again. After the I/O target completes the last of the smaller requests, the <em>CompletionRoutine</em> callback function can call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548734(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfObjectDelete</strong></a> to delete the driver-created request object and the driver can call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a> to complete the original request.</p>
</li>
<li>
<p>Calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549951(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCreate</strong></a> to create several additional request objects that represent the smaller requests. </p>
<p>The driver's I/O targets can process these multiple smaller requests asynchronously. The driver can register a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function for each of the smaller requests. Each time that the <em>CompletionRoutine</em> callback function is called, it can call  <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548734(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfObjectDelete</strong></a> to delete a driver-created request object. After the I/O target completes all of the smaller requests, the driver can call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a> to complete the original request.</p>
</li>
</ul>
<h3><a id="providing_completion_information"></a><a id="PROVIDING_COMPLETION_INFORMATION"></a> Providing Completion Information</h3>
<p>When a driver completes a request, it can optionally provide some additional information that other drivers can access. For example, a driver might provide the number of bytes that were transferred for a read or write request. To provide this information, the driver can do either of the following:</p>
<ul>
<li>
<p>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550032(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestSetInformation</strong></a> before calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>.</p>
</li>
<li>
<p>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549948(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCompleteWithInformation</strong></a>.</p>
</li>
</ul>
<h3><a id="obtaining_completion_information"></a><a id="OBTAINING_COMPLETION_INFORMATION"></a>
      Obtaining Completion Information</h3>
<p>To obtain information about an I/O request that another driver has completed, a driver can:</p>
<ul>
<li>
<p>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549974(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetStatus</strong></a> to obtain the completion status value that the lower-level driver specified when it called <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549945(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestComplete</strong></a>.</p>
</li>
<li>
<p>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549961(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetCompletionParams</strong></a> to obtain a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff552454(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WDF_REQUEST_COMPLETION_PARAMS</strong></a> structure that contains additional information about the completed request, such as handles to memory objects that represent the request's buffers, or bus-specific information.</p>
<p>A driver can call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549961(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetCompletionParams</strong></a> only after it calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550027(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestSend</strong></a> to send the I/O request synchronously or asynchronously to an I/O target. The driver must not call <strong>WdfRequestGetCompletionParams</strong> after it calls one of the methods that send I/O requests to I/O targets only synchronously (such as <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548669(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfIoTargetSendReadSynchronously</strong></a>).</p>
</li>
<li>
<p>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549965(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetInformation</strong></a> to obtain additional I/O completion information that the lower-level driver specified when it called <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550032(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestSetInformation</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549948(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestCompleteWithInformation</strong></a>, if drivers in the driver stack provide such information.</p>
</li>
</ul>
<p>If a driver sends an I/O request synchronously, it typically calls <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549974(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetStatus</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549961(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetCompletionParams</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549965(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WdfRequestGetInformation</strong></a> after the synchronous call returns. If a driver sends an I/O request asynchronously, it typically calls these methods from within a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff540745(v=vs.85).aspx"><em xmlns="http://www.w3.org/1999/xhtml">CompletionRoutine</em></a> callback function.</p>
<p>For more information about completing I/O requests, see <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff544726(v=vs.85).aspx">Synchronizing Cancel and Completion Code</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [wdf\wdf]:%20Completing I/O Requests%20 RELEASE:%20(2/20/2014)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
</div>

    




<div class="libraryMemberFilter">
    <div class="filterContainer">
        <span>Show:</span>
        <label>
            <input type="checkbox" class="libraryFilterInherited" checked="checked" value="Inherit" />Inherited
        </label>
        <label>
            <input type="checkbox" class="libraryFilterProtected" checked="checked" value="Protected" />Protected
        </label>
    </div>
</div>
    
<input type="hidden" id="libraryMemberFilterEmptyWarning" value="There are no members available with your current filter settings." />


 
</div>




            </div>
            <div class="clear"></div>
        
            
    
<input name="__RequestVerificationToken" type="hidden" value="2YlQnT1Re4AnB-13xHleqRAcuS2n8FxQ2rKYYO_NQbZ0-4FmDKpndpZkPzlR9QKP_y-7vhoQxpjHC7EqnvKVbjuUaasdBmkej7pNFkp8yVwcgFoW-uHZpmJVIoQkIx_1NeCt4g2" />
<input id="ratingSubmitUrl" type="hidden" value="http://msdn.microsoft.com/en-us/library/feedback/add/ff540740(v=vs.85).aspx" />
<input id="isTopicRated" type="hidden" value="false" />




    


    <div id="ux-footer" class=" ltr">
        
            <div id="footerSock">
                <div id="footerSockInner">
                    <a name="feedback"></a>
                    <div data-fragmentName="Survey" id="Fragment_Survey" xmlns="http://www.w3.org/1999/xhtml">
  <div class="DetailedLink">
    
    <div class="Content"></div>
  </div>
</div>
<div class="rating">
    <div id="ratingSection1">
        <div class="title">
            Was this page helpful?
        </div>
        <div class="description">
            Your feedback about this content is important.<br />Let us know what you think.
        </div>
        <div class="buttons">
            <button id="ratingYes">Yes</button>
            <button id="ratingNo">No</button>
        </div>
        <input id="ratingValue" type="hidden" value="" />
    </div>
    <div id="ratingSection2">
        <div class="title">
            Additional feedback?
        </div>
        <textarea id="ratingText" rows="6" cols=""></textarea>
        <div class="buttons">
            <button id="ratingSubmit">Submit</button>
            <button id="ratingSkipThis">Skip this</button>
        </div>
    </div>
    <div id="ratingSection3">
        <div class="title">
            Thank you!
        </div>
        <div class="description">
            We appreciate your feedback.
        </div>
    </div>
    
    
    <div id="contentFeedbackQAContainer" style="display: none;"></div>
</div>


                    <div data-fragmentName="SockLinks" id="Fragment_SockLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317805" id="SockLinks_727_11" xmlns="http://www.w3.org/1999/xhtml">Find us on Facebook</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317806" id="SockLinks_727_12" xmlns="http://www.w3.org/1999/xhtml">Follow us on Twitter</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?linkid=285656" id="SockLinks_727_40" xmlns="http://www.w3.org/1999/xhtml">Read the hardware blog</a>
        </li>
      </ul>
    </div>
  </div>
</div>
                    <div class="clear"></div>
                </div>
            </div>
        <div id="footerContainer">
            <div id="fourColumnFooter">
                <div data-fragmentName="Column1" id="Fragment_Column1" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Centers</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://msdn.microsoft.com/windows" id="Column1_727_13" xmlns="http://www.w3.org/1999/xhtml">Dev Center Home</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/apps" id="Column1_727_14" xmlns="http://www.w3.org/1999/xhtml">Windows Store apps</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/ie" id="Column1_727_15" xmlns="http://www.w3.org/1999/xhtml">Internet Explorer</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/desktop" id="Column1_727_16" xmlns="http://www.w3.org/1999/xhtml">Desktop</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/hardware" id="Column1_727_17" xmlns="http://www.w3.org/1999/xhtml">Hardware</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column2" id="Fragment_Column2" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Related developer sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285634" id="Column2_727_18" xmlns="http://www.w3.org/1999/xhtml">Microsoft Connect</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285635" id="Column2_727_19" xmlns="http://www.w3.org/1999/xhtml">OSR Online</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282089" id="Column2_727_42" xmlns="http://www.w3.org/1999/xhtml">Visual Studio</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=280293" id="Column2_727_20" xmlns="http://www.w3.org/1999/xhtml">Windows Phone</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282087" id="Column2_727_43" xmlns="http://www.w3.org/1999/xhtml">Windows Server</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Other Windows sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285636" id="Column2_727_21" xmlns="http://www.w3.org/1999/xhtml">Enterprise</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285637" id="Column2_727_22" xmlns="http://www.w3.org/1999/xhtml">Small business</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285638" id="Column2_727_23" xmlns="http://www.w3.org/1999/xhtml">Students</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285639" id="Column2_727_24" xmlns="http://www.w3.org/1999/xhtml">Home users</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column3" id="Fragment_Column3" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Downloads</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285645" id="Column3_727_25" xmlns="http://www.w3.org/1999/xhtml">Windows Driver Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285646" id="Column3_727_26" xmlns="http://www.w3.org/1999/xhtml">Windows Assessment and Deployment Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285647" id="Column3_727_27" xmlns="http://www.w3.org/1999/xhtml">Windows Hardware Certification Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?LinkID=316548" id="Column3_727_29" xmlns="http://www.w3.org/1999/xhtml">Visual Studio Professional 2013</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285649" id="Column3_727_30" xmlns="http://www.w3.org/1999/xhtml">More downloads</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Support</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285664" id="Column3_727_44" xmlns="http://www.w3.org/1999/xhtml">Forums</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285663" id="Column3_727_45" xmlns="http://www.w3.org/1999/xhtml">More support options</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column4" id="Fragment_Column4" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Essentials</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285650" id="Column4_727_46" xmlns="http://www.w3.org/1999/xhtml">Recently published</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285651" id="Column4_727_47" xmlns="http://www.w3.org/1999/xhtml">Debugging</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=328186" id="Column4_727_48" xmlns="http://www.w3.org/1999/xhtml">Samples</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285653" id="Column4_727_49" xmlns="http://www.w3.org/1999/xhtml">Hardware dashboard</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=317804" id="Column4_727_50" xmlns="http://www.w3.org/1999/xhtml">Partner with Microsoft</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Stay connected</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285658" id="Column4_727_36" xmlns="http://www.w3.org/1999/xhtml">Microsoft events</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=313299" id="Column4_727_37" xmlns="http://www.w3.org/1999/xhtml">Windows App Builder Blog</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
            </div>

            <div id="baseFooterLogos">
                <span class="microsoftlogo" title="Microsoft"></span>
                <a href="http://msdn.microsoft.com/en-us" class="msdnlogo" title="MSDN"></a>
            </div>
        
            <div id="baseFooter">
                <div id="FooterCopyright">© 2014 Microsoft</div>
                <div data-fragmentName="BaseFooterContent" id="Fragment_BaseFooterContent" xmlns="http://www.w3.org/1999/xhtml">
  <div xmlns="http://www.w3.org/1999/xhtml">
    <div xmlns:mtps="http://msdn2.microsoft.com/mtps">
      <div data-fragmentName="BaseFooter" id="Fragment_BaseFooter">
        
        <div class="LinkList">
          <div class="Links">
            <ul class="LinkColumn horizontal">
              <li>
                <a href="http://msdn.microsoft.com/windows/apps/cc300389" id="BaseFooter_35351_1" xmlns="http://www.w3.org/1999/xhtml">Terms of Use</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx" id="BaseFooter_35351_2" xmlns="http://www.w3.org/1999/xhtml">Trademarks</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/info/privacy.mspx" id="BaseFooter_35351_3" xmlns="http://www.w3.org/1999/xhtml">Privacy and Cookies</a>
              </li>
              <li>
                <a href="http://msdn.microsoft.com/en-us/windows/dn554289" id="BaseFooter_730_5" xmlns="http://www.w3.org/1999/xhtml">Site map</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div data-fragmentName="HelloText" id="Fragment_HelloText">Hello from Seattle.
</div>
    </div>
  </div>
</div>  
                    <form class="selectLocale" id="selectLocaleForm" action="http://msdn.microsoft.com/en-us/windows/hardware/SelectLocale">
        <input type="hidden" name="fromPage" value="http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fff540740(v%3dvs.85).aspx" />
        <a href="#" onclick="$('#selectLocaleForm').submit();return false;" title="Change your language">United States (English)</a>
    </form>    


                <div class="clear"></div>
            </div>
        </div>
    </div> 


            <div class="footerPrintView">
                <div class="footerCopyrightPrintView">© 2014 Microsoft. All rights reserved.</div>
            </div>

            
            
    


        
            <input id="MtpsDevice" type="hidden" value="Default" />


<![CDATA[ Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx. ]]>
        
            
            
            
            
            
        





<noscript><div><img alt="DCSIMG" id="Img1" width="1" height="1" src="http://m.webtrends.com/dcsmgru7m99k7mqmgrhudo0k8_8c6m/njs.gif?dcsuri=/nojavascript&amp;WT.js=No" /></div></noscript>









<noscript>
  <a href="http://www.omniture.com/" title="Web Analytics">
    <img src="http://msstonojsmsdn.112.2o7.net/b/ss/msstonojsmsdn/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" />
  </a>
</noscript>




<div id="globalRequestVerification">
    <input name="__RequestVerificationToken" type="hidden" value="QMzaLghdZNjsCCy3g3YSx-N1hXa_JQmZrp6Vr7L4PB5_eDCPZoRN_-0vVsy1z13hcPE561CNVGAGIUl_vrDKNA8rw8FrS81Lwe-BY0T-4RxymkMsJw4tlIsz9Gjl5PjWsu2tOw2" />
</div>


        </div>
    <script type="text/javascript" class="mtps-injected">
/*<![CDATA[*/
(function(window,document){"use strict";function preload(scripts){for(var result=[],script,e,i=0;i<scripts.length;i++)script=scripts[i],script.hasOwnProperty("url")&&(e=document.createElement("script"),e.src=script.url,script.throwaway=e),result.push(script);return result}function inject(scripts,index){var script,elem;if(index>=scripts.length){delete mtps.injectScripts;return}script=scripts[index];elem=document.createElement("script");elem.className="mtps-injected";elem.async=!1;var isLoaded=!1,timeoutId=0,injectNextFnName="",injectNext=elem.onerror=function(){isLoaded||(isLoaded=!0,inject(scripts,index+1),window.clearTimeout(timeoutId),elem.onload=elem.onerror=elem.onreadystatechange=null,injectNextFnName&&delete mtps[injectNextFnName],elem.removeEventListener&&elem.removeEventListener("load",injectNext,!1))};elem.addEventListener?elem.addEventListener("load",injectNext,!1):elem.readyState==="uninitialized"?elem.onreadystatechange=function(){(this.readyState==="loaded"||this.readyState==="complete")&&injectNext()}:elem.onload=injectNext;script.hasOwnProperty("url")?(timeoutId=window.setTimeout(injectNext,12e4),elem.src=script.url):(injectNextFnName="_injectNextScript_"+index,mtps[injectNextFnName]=injectNext,timeoutId=window.setTimeout(injectNext,2e3),elem.text="try {\n"+script.txt+"\n} finally { MTPS."+injectNextFnName+" && MTPS."+injectNextFnName+"(); }");parent.appendChild(elem)}var mtps=window.MTPS||(window.MTPS={}),parent=document.getElementsByTagName("head")[0];mtps.injectScripts=function(scripts){inject(preload(scripts),0)}})(window,document);
MTPS.injectScripts([
	{ txt: "/**/\r\n(window.MTPS || (window.MTPS = {})).cdnDomains || (window.MTPS.cdnDomains = { \r\n\t\"image\": \"http://i.msdn.microsoft.com\", \r\n\t\"js\": \"http://i2.msdn.microsoft.com\", \r\n\t\"css\": \"http://i3.msdn.microsoft.com\"\r\n});\r\n/**/" },
	{ url: "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js" },
	{ txt: "//\n  var literalNormalizedUrl = \u0027/en-us/library/windows/hardware/ff540740(d=default,l=en-us,v=vs.85).aspx\u0027;\n  var wt_nvr_ru = \u0027WT_NVR_RU\u0027;\n  var wt_fpcdom = \u0027.microsoft.com\u0027;\n  var wt_domlist = \u0027msdn.microsoft.com\u0027;\n  var wt_pathlist = \u0027\u0027;\n  var wt_paramlist = \u0027DCSext.mtps_devcenter\u0027;\n  var wt_siteid = \u0027MSDN\u0027;\n  var gDomain = \u0027m.webtrends.com\u0027;\n  var gDcsId = \u0027dcsmgru7m99k7mqmgrhudo0k8_8c6m\u0027;\n  var gFpc = \u0027WT_FPC\u0027;\n\n\n\n  if (document.cookie.indexOf(gFpc + \"=\") == -1) {\n    var wtidJs = document.createElement(\"script\");\n    wtidJs.src = \"//\" + gDomain + \"/\" + gDcsId + \"/wtid.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(wtidJs);\n  }\n\n\n\n  var detectedLocale = \u0027en-us\u0027;\n  var wtsp = \u0027_msdn_\u0027;\n  var gTrackEvents = \u00270\u0027;\n/**/" },
	{ txt: "/**/\n  var omni_guid = \"6b0d6d69-0e7d-43f7-8078-09fcdbff8dfb\";\n/**/" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Utilities,0:Topic,1:webtrendsscript,2:omni_rsid_MSDN,3:SearchBox;/Areas/Epx/Content/Scripts:0,/Areas/Global/Content/Webtrends/resources:1,/Areas/Global/Content/Omniture/resources/MSDN:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=E93F43E708C4E79B13014A098239D120" },
	{ url: "http://i3.services.social.microsoft.com/search/Widgets/SearchBox.jss?boxid=HeaderSearchTextBox\u0026btnid=HeaderSearchButton\u0026brand=MSDN\u0026loc=en-us\u0026Refinement=182\u0026focusOnInit=false\u0026iroot=windows%2fhardware\u0026emptyWatermark=true\u0026searchButtonTooltip=Search" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Header,1:Toc,1:LibraryMemberFilter,2:Toc_Fixed,3:Rating,2:CodeSnippet,2:TopicNotInScope,2:CollapsibleArea,2:VersionSelector,2:SurveyBroker;/Areas/Epx/Themes/Windows/Content:0,/Areas/Library/Content:1,/Areas/Epx/Content/Scripts:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=2738C0CC18843CA9EAD45D501FB8031F" },
	{ txt: "$(document).ready(function() {\n        try {\n            var token = $(\"#globalRequestVerification input[name=\u0027__RequestVerificationToken\u0027]\").clone();\n            $(\"#siteFeedbackForm\").append(token);\n        } catch(err) {\n            \n        }\n    });" }
]);

/*]]>*/
</script></body>

<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/ff540740(v=vs.85).aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:01 GMT -->
</html>