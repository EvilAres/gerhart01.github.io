<!DOCTYPE html>

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en">
    
<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/hh450899(v=vs.85).aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><link rel="canonical" href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450899(v=vs.85).aspx" />
        <title>How to Submit an URB (Windows Drivers)</title>




<meta name="DCS.dcsuri" content="/en-us/library/windows/hardware/hh450899(d=default,l=en-us,v=vs.85).aspx" />

<meta name="NormalizedUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450899(d=default,l=en-us,v=vs.85).aspx" />

<meta name="ms.normalizedurl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450899(d=default,l=en-us,v=vs.85).aspx" />

<meta name="VotingContextUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450899(d=default,l=en-us,v=vs.85).aspx" />

<meta name="MN" content="BF1CA93B-9:37:25 AM" />

<meta name="Search.ShortId" content="hh450899" />

<meta name="ms.shortidmsdn" content="hh450899" />

<meta name="Ms.Locale" content="en-us" />







        
    <link rel="shortcut icon" href="http://msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Winlogo_favicon.ico" />

    <link rel="stylesheet" type="text/css" href="http://i3.msdn.microsoft.com/Combined.css?resources=0:Topic,0:CodeSnippet,0:ExpandableCollapsibleArea,1:CommunityContent,0:TopicNotInScope,0:FeedViewerBasic,0:ImageSprite,2:Header,2:sprite,1:Toc,1:LibraryMemberFilter,2:Footer,3:DetailedLinkList,3:LinkList,4:Windows;/Areas/Epx/Content/Css:0,/Areas/Library/Content:1,/Areas/Epx/Themes/Windows/Content:2,/Areas/Epx/Themes/Base/Content:3,/Areas/Library/Themes/Windows/Content:4&amp;amp;hashKey=E1AF301680B6D838738C2F52E9149624" /></head>
    <body class="library ">
        <div id="page">
            
            
  
            
    
    

    <div id="ux-header" class=" ltr">
        <div id="headerContainer">
            <div id="logoAndSearchBox">
                <div id="logo">
                    <a href="http://msdn.microsoft.com/windows/" title="Windows"><img alt="Windows" src="http://i.msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Windows_logo.png"></img></a>       
                </div>
              
        <div id="selectedTab">
            <a class="dropDownToggle" href="javascript:void(0);">Dev Center - Hardware</a>    
        </div>
    <div id="toclevel1_menu" style="display: none;">
        <ul>
                <li><a href="http://msdn.microsoft.com/windows/" title="Dev Center Home">Dev Center Home</a></li>
                <li><a href="http://msdn.microsoft.com/windows/apps/" title="Windows Store apps">Windows Store apps</a></li>
                <li><a href="http://msdn.microsoft.com/ie/" title="Internet Explorer">Internet Explorer</a></li>
                <li><a href="http://msdn.microsoft.com/windows/desktop/" title="Desktop">Desktop</a></li>
                <li><a href="http://msdn.microsoft.com/windows/hardware/" title="Hardware">Hardware</a></li>
        </ul>
        <div style="clear: both"></div>
    </div> 

                
                  

        <div class="SearchBox">   
            <form id="HeaderSearchForm" name="HeaderSearchForm" method="get" onsubmit="return Epx.Controls.SearchBox.searchBoxOnSubmit(this);">
            <input id="HeaderSearchTextBox" name="query" type="text" maxlength="200" onfocus="Epx.Controls.SearchBox.watermarkFocus(event, this.title)" onblur="Epx.Controls.SearchBox.watermarkBlur(event, this.title)" />            
            <button id="HeaderSearchButton" value="" type="submit" class="header-search-button"></button>
            </form>
         
                
                 
    
        </div>

                <div class="Clear"></div>
            </div>
            <div class="Clear"></div>
            <div class="ux-internav">
    <div class="toclevel2"> 
            <a class="normal" href="https://sysdev.microsoft.com/en-us/hardware/" title="Dashboard">Dashboard</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg507680" title="Get Started ">Get Started </a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg462970" title="Design">Design</a>
            <a class="active" href="http://msdn.microsoft.com/windows/hardware/ff960953" title="Develop">Develop</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg463010" title="Certify">Certify</a>
    </div>
    <div class="clear"></div>

            </div>
            <div id="signIn">

<a class="scarabLink" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=12&amp;ct=1395074245&amp;rver=6.0.5276.0&amp;wp=MCLBI&amp;wlcxt=MSDN%24MSDN%24MSDN&amp;wreply=http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fhh450899%2528v%3dvs.85%2529.aspx&amp;lc=1033&amp;id=254354&amp;mkt=en-US" title="Sign in">Sign in</a></div>

    

        </div>  
        <div id="blackBar">
    <div class="toclevel3"> 
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/gg454504" title="Systems">Systems</a>
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/gg454505" title="Devices">Devices</a>
            <a class="active" href="http://msdn.microsoft.com/library/windows/hardware/ff557573" title="Drivers">Drivers</a>
            <a class="normal" href="http://msdn.microsoft.com/library/windows/hardware/ff551063(v=vs.85).aspx" title="Debugging">Debugging</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg454513" title="Downloads">Downloads</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/dn433227.aspx" title="Samples">Samples</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg454517" title="Community">Community</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/dn550976" title="Archives">Archives</a>
    </div>
    <div class="clear"></div>

        </div>
    </div>


        
            <div id="body">
                







    <div id="leftNav">



<div id="tocnav">
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff557557(v=vs.85).aspx" id="ff576019_VS.85_en-us" mtpsaliasid="" mtpsassetid="1ef3e216-1322-42c3-b070-94cddfb2133c_VS.85_en-us" mtpsshortid="ff557557_VS.85_en-us" title="Device and Driver Technologies">Device and Driver Technologies</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff557547(v=vs.85).aspx" id="hh440424_VS.85_en-us" mtpsaliasid="" mtpsassetid="5cefa114-cec1-4058-a7a9-08e0b13fe412_VS.85_en-us" mtpsshortid="ff557547_VS.85_en-us" title="Bus and Port Drivers">Bus and Port Drivers</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff538930(v=vs.85).aspx" id="dn303474_VS.85_en-us" mtpsaliasid="" mtpsassetid="45ba2638-b1b9-409d-bd23-78e75a3515be_VS.85_en-us" mtpsshortid="ff538930_VS.85_en-us" title="Universal Serial Bus (USB)">Universal Serial Bus (USB)</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406260(v=vs.85).aspx" id="hh948131_VS.85_en-us" mtpsaliasid="" mtpsassetid="CA11CE23-B0BA-4932-A2BE-983F070B51D6_VS.85_en-us" mtpsshortid="hh406260_VS.85_en-us" title="Developing Windows client drivers for USB devices">Developing Windows client drivers for USB devices</a>            </div>
            <div class="toclevel1" data-toclevel="1">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff537056(v=vs.85).aspx" id="hh948136_VS.85_en-us" mtpsaliasid="" mtpsassetid="15be1e51-5ab2-40c4-95a8-8555c92523aa_VS.85_en-us" mtpsshortid="ff537056_VS.85_en-us" title="About USB Block Requests (URBs)">About USB Block Requests (URBs)</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450844(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Allocating and Building URBs">Allocating and Building URBs</a>            </div>
            <div class="toclevel2 current" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450899(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="How to Submit an URB">How to Submit an URB</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406258(v=vs.85).aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Best Practices: Using URBs">Best Practices: Using URBs</a>            </div>
</div>
        

        

        
        
        <div id="toc-resizable-ew" class="toc-resizable-ew"></div>
        
    </div>
<div id="content" class="content">







        

<div class="topic" xmlns="http://www.w3.org/1999/xhtml">
  <h1 class="title">How to Submit an URB</h1>
  
  <div id="mainSection">
<div class="clsServerSDKContent">

</div>
<p>This topic describes the steps that are required to submit an initialized URB to the USB driver stack to process a particular request.</p>
<p>A client driver communicates with its device by using I/O control code (IOCTL) requests that are delivered to the device in I/O request packets (IRPs)  of type <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550766(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IRP_MJ_INTERNAL_DEVICE_CONTROL</strong></a>. For a device specific request, such as a select-configuration request, the request is described in an USB Request Block (URB) that is associated with an IRP. The process of  associating an URB with an IRP, and sending the request to the USB driver stack is referred to as submitting an URB. To submit an URB, the client driver must use  <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff537271(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IOCTL_INTERNAL_USB_SUBMIT_URB</strong></a> as the device control code. The IOCTL is one of the "internal" control codes that provide an I/O interface that a client driver uses to manage its device and the port to which the device is connected. User-mode applications do not have access to those internal I/O interface.  For more control codes for kernel mode drivers, see <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff537421(v=vs.85).aspx">Kernel-Mode IOCTLs for USB Client Drivers</a>.</p>
<h3><a id="Prerequisites"></a><a id="prerequisites"></a><a id="PREREQUISITES"></a>Prerequisites</h3>
<p>Before sending a request to the Universal Serial Bus (USB) driver stack, the client driver must allocate an <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff538923(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">URB</strong></a> structure and format that structure depending on the type of request. For more information, see <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh450844(v=vs.85).aspx">Allocating and Building URBs</a> and <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406258(v=vs.85).aspx">Best Practices: Using URBs</a>.</p>
<h2>Instructions</h2>
<h3><a id=""></a></h3>
<ol>
<li>Allocate an IRP for the URB by calling the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548257(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoAllocateIrp</strong></a> routine. You must provide the stack size of the device object that receives the IRP. You received a pointer to that device object in a previous call to the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548300(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoAttachDeviceToDeviceStack</strong></a> routine. The stack size is stored in the <strong>StackSize</strong> member of the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff543147(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DEVICE_OBJECT</strong></a> structure. </li>
<li>Get a pointer to the IRP's first stack location (<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550659(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IO_STACK_LOCATION</strong></a>) by calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549266(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoGetNextIrpStackLocation</strong></a>.</li>
<li>Set the <strong>MajorFunction</strong> member of the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550659(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IO_STACK_LOCATION</strong></a> structure to <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550766(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IRP_MJ_INTERNAL_DEVICE_CONTROL</strong></a>.</li>
<li>Set the <strong>Parameters.DeviceIoControl.IoControlCode</strong> member of  the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550659(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IO_STACK_LOCATION</strong></a> structure to <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff537271(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IOCTL_INTERNAL_USB_SUBMIT_URB</strong></a>.</li>
<li>Set the <strong>Parameters.Others.Argument1</strong> member of the <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff550659(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IO_STACK_LOCATION</strong></a> structure to the address of the initialized <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff538923(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">URB</strong></a> structure. To associate the IRP to the URB, you can alternatively call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406228(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">USBD_AssignUrbToIoStackLocation</strong></a> only if the URB was allocated by <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406250(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">USBD_UrbAllocate</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406243(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">USBD_SelectConfigUrbAllocateAndBuild</strong></a>, or <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh406245(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">USBD_SelectInterfaceUrbAllocateAndBuild</strong></a>.</li>
<li>Set a completion routine by calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549686(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoSetCompletionRoutineEx</strong></a>. <p>If you submit the URB asynchronously, pass a pointer to the caller-implemented completion routine and its context. The caller releases the IRP in its completion routine.</p>
<p>If you are submitting the IRP synchronously, implement a completion routine and pass a pointer to that routine in the call to <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549686(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoSetCompletionRoutineEx</strong></a>. The call also requires an initialized KEVENT object in the <em>Context</em> parameter.   In your completion routine, set the event to the signaled state. </p>
</li>
<li>Call <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff548336(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IoCallDriver</strong></a> to forward the populated IRP to the next lower device object in the device stack. For an synchronous call, after calling <strong>IoCallDriver</strong>, wait for the event object by calling <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff553350(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">KeWaitForSingleObject</strong></a> to get the event notification.</li>
<li>Upon completion of the IRP, check the <strong>IoStatus.Status</strong> member of IRP and evaluate the result. If the <strong>IoStatus.Status</strong> is STATUS_SUCCESS, the request was successful.</li>
</ol>
<h2>Complete example</h2>
<p>The following example shows how to submit an URB synchronously.</p>

<div id="code-snippet-1" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        <div class="codeSnippetContainerTabSingle" dir="ltr"><a>C++</a></div>
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_7a65b925-fd65-41ba-a709-db8431828891');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_7a65b925-fd65-41ba-a709-db8431828891" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>

<span style="color:Green;">// The SubmitUrbSync routine submits an URB synchronously.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Parameters:</span>
<span style="color:Green;">//      DeviceExtension: Pointer to the caller's device extension. The</span>
<span style="color:Green;">//                       device extension must have a pointer to </span>
<span style="color:Green;">//                       the next lower device object in the device stacks.  </span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      Irp: Pointer to an IRP allocated by the caller.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      Urb: Pointer to an URB that is allocated by  USBD_UrbAllocate, </span>
<span style="color:Green;">//           USBD_IsochUrbAllocate, USBD_SelectConfigUrbAllocateAndBuild, </span>
<span style="color:Green;">//           or USBD_SelectInterfaceUrbAllocateAndBuild.</span>

<span style="color:Green;">//      CompletionRoutine: Completion routine.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Return Value:                                                       </span>
<span style="color:Green;">//                                                                      </span>
<span style="color:Green;">//      NTSTATUS  </span>

NTSTATUS SubmitUrbSync( PDEVICE_EXTENSION DeviceExtension,
                       PIRP Irp,
                       PURB Urb,  
                       PIO_COMPLETION_ROUTINE SyncCompletionRoutine)  

{

    NTSTATUS  ntStatus;  
    KEVENT    kEvent;

    PIO_STACK_LOCATION nextStack;

    <span style="color:Green;">// Get the next stack location.</span>
    nextStack = IoGetNextIrpStackLocation(Irp);  

    <span style="color:Green;">// Set the major code.</span>
    nextStack-&gt;MajorFunction = IRP_MJ_INTERNAL_DEVICE_CONTROL;  

    <span style="color:Green;">// Set the IOCTL code for URB submission.</span>
    nextStack-&gt;Parameters.DeviceIoControl.IoControlCode = IOCTL_INTERNAL_USB_SUBMIT_URB;  

    <span style="color:Green;">// Attach the URB to this IRP.</span>
    <span style="color:Green;">// The URB must be allocated by USBD_UrbAllocate, USBD_IsochUrbAllocate, </span>
    <span style="color:Green;">// USBD_SelectConfigUrbAllocateAndBuild, or USBD_SelectInterfaceUrbAllocateAndBuild.</span>
    USBD_AssignUrbToIoStackLocation (DeviceExtension-&gt;UsbdHandle, nextStack, Urb);

    KeInitializeEvent(&amp;kEvent, NotificationEvent, FALSE);

    ntStatus = IoSetCompletionRoutineEx ( DeviceExtension-&gt;NextDeviceObject,  
        Irp,  
        SyncCompletionRoutine,  
        (PVOID) &amp;kEvent,  
        TRUE, 
        TRUE, 
        TRUE);

    <span style="color:Blue;">if</span> (!NT_SUCCESS(ntStatus))
    {
        KdPrintEx(( DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, <span style="color:#A31515;">"IoSetCompletionRoutineEx failed. \n"</span> ));
        <span style="color:Blue;">goto</span> Exit;
    }

    ntStatus = IoCallDriver(DeviceExtension-&gt;NextDeviceObject, Irp);  

    <span style="color:Blue;">if</span> (ntStatus == STATUS_PENDING) 
    {
        KeWaitForSingleObject ( &amp;kEvent,
            Executive,
            KernelMode,
            FALSE,
            NULL);
    }

    ntStatus = Irp-&gt;IoStatus.Status;

Exit:

    <span style="color:Blue;">if</span> (!NT_SUCCESS(ntStatus))
    {
        <span style="color:Green;">// We hit a failure condition, </span>
        <span style="color:Green;">// We will free the IRP</span>

        IoFreeIrp(Irp);
        Irp = NULL;
    }


    <span style="color:Blue;">return</span> ntStatus;
}

<span style="color:Green;">// The SyncCompletionRoutine routine is the completion routine </span>
<span style="color:Green;">// for the synchronous URB submit request.          </span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Parameters:</span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      DeviceObject: Pointer to the device object. </span>
<span style="color:Green;">//      Irp:          Pointer to an an I/O Request Packet. </span>
<span style="color:Green;">//      CompletionContext: Context for the completion routine.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Return Value:                                                       </span>
<span style="color:Green;">//                                                                      </span>
<span style="color:Green;">//      NTSTATUS  </span>

NTSTATUS SyncCompletionRoutine ( PDEVICE_OBJECT DeviceObject,
                                PIRP           Irp,
                                PVOID          Context)
{
    PKEVENT kevent;

    kevent = (PKEVENT) Context;

    <span style="color:Blue;">if</span> (Irp-&gt;PendingReturned == TRUE)
    {
        KeSetEvent(kevent, IO_NO_INCREMENT, FALSE);
    }

    KdPrintEx(( DPFLTR_IHVDRIVER_ID, DPFLTR_INFO_LEVEL, <span style="color:#A31515;">"Request completed. \n"</span> ));


    <span style="color:Blue;">return</span> STATUS_MORE_PROCESSING_REQUIRED;
} 



</pre></div>
            
        </div>
    </div>
</div>

<h2><a id="Complete_example"></a><a id="complete_example"></a><a id="COMPLETE_EXAMPLE"></a>Complete example</h2>
<p>The following example shows how to submit an URB asynchronously.</p>

<div id="code-snippet-2" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        <div class="codeSnippetContainerTabSingle" dir="ltr"><a>C++</a></div>
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_fec4edb1-3f50-454d-97c6-bc7e0f8e3edb');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_fec4edb1-3f50-454d-97c6-bc7e0f8e3edb" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>

<span style="color:Green;">// The SubmitUrbASync routine submits an URB asynchronously.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Parameters:</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Parameters:</span>
<span style="color:Green;">//      DeviceExtension: Pointer to the caller's device extension. The</span>
<span style="color:Green;">//                       device extension must have a pointer to </span>
<span style="color:Green;">//                       the next lower device object in the device stacks.  </span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      Irp: Pointer to an IRP allocated by the caller.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      Urb: Pointer to an URB that is allocated by  USBD_UrbAllocate, </span>
<span style="color:Green;">//           USBD_IsochUrbAllocate, USBD_SelectConfigUrbAllocateAndBuild, </span>
<span style="color:Green;">//           or USBD_SelectInterfaceUrbAllocateAndBuild.</span>

<span style="color:Green;">//      CompletionRoutine: Completion routine.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">//      CompletionContext: Context for the completion routine.</span>
<span style="color:Green;">//</span>
<span style="color:Green;">//</span>
<span style="color:Green;">// Return Value:                                                       </span>
<span style="color:Green;">//                                                                      </span>
<span style="color:Green;">//      NTSTATUS      </span>

NTSTATUS SubmitUrbASync ( PDEVICE_EXTENSION DeviceExtension,
                         PIRP Irp,
                         PURB Urb,  
                         PIO_COMPLETION_ROUTINE CompletionRoutine,  
                         PVOID CompletionContext)  
{
    <span style="color:Green;">// Completion routine is required if the URB is submitted asynchronously.</span>
    <span style="color:Green;">// The caller's completion routine releases the IRP when it completes.</span>


    NTSTATUS ntStatus = -1;  

    PIO_STACK_LOCATION nextStack = IoGetNextIrpStackLocation(Irp);  

    <span style="color:Green;">// Attach the URB to this IRP.</span>
    nextStack-&gt;MajorFunction = IRP_MJ_INTERNAL_DEVICE_CONTROL;  

    <span style="color:Green;">// Attach the URB to this IRP.</span>
    nextStack-&gt;Parameters.DeviceIoControl.IoControlCode = IOCTL_INTERNAL_USB_SUBMIT_URB;  

    <span style="color:Green;">// Attach the URB to this IRP.</span>
    (<span style="color:Blue;">void</span>) USBD_AssignUrbToIoStackLocation (DeviceExtension-&gt;UsbdHandle, nextStack, Urb);  

    <span style="color:Green;">// Caller's completion routine will free the irp when it completes.</span>
    ntStatus = IoSetCompletionRoutineEx ( DeviceExtension-&gt;NextDeviceObject,
        Irp,  
        CompletionRoutine,  
        CompletionContext,  
        TRUE, 
        TRUE, 
        TRUE);

    <span style="color:Blue;">if</span> (!NT_SUCCESS(ntStatus))
    {
        <span style="color:Blue;">goto</span> Exit;
    }

    (<span style="color:Blue;">void</span>) IoCallDriver(DeviceExtension-&gt;NextDeviceObject, Irp);

Exit:
    <span style="color:Blue;">if</span> (!NT_SUCCESS(ntStatus))
    {
        <span style="color:Green;">// We hit a failure condition, </span>
        <span style="color:Green;">// We will free the IRP</span>

        IoFreeIrp(Irp);
        Irp = NULL;
    }

    <span style="color:Blue;">return</span> ntStatus;
}


</pre></div>
            
        </div>
    </div>
</div>

<h2><a id="related_topics"></a>Related topics</h2>
<dl>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff537056(v=vs.85).aspx">Sending Requests to a USB Device</a>
</dt>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [usbcon\buses]:%20How to Submit an URB%20 RELEASE:%20(2/20/2014)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
</div>

    




<div class="libraryMemberFilter">
    <div class="filterContainer">
        <span>Show:</span>
        <label>
            <input type="checkbox" class="libraryFilterInherited" checked="checked" value="Inherit" />Inherited
        </label>
        <label>
            <input type="checkbox" class="libraryFilterProtected" checked="checked" value="Protected" />Protected
        </label>
    </div>
</div>
    
<input type="hidden" id="libraryMemberFilterEmptyWarning" value="There are no members available with your current filter settings." />


 
</div>




            </div>
            <div class="clear"></div>
        
            
    
<input name="__RequestVerificationToken" type="hidden" value="LX7iuB9mwVH0UZxQVcLOPn5zdWsIUtPrvTH5kwbrITjfPbFJsRMN1dVvna4yO4D1ZGZbX6TfKrtrY87q0EZQF3DpC7u1QD6aGCJ6EeKJjSYuqFKXS5dK1qQds5LLoYixsLHW7A2" />
<input id="ratingSubmitUrl" type="hidden" value="http://msdn.microsoft.com/en-us/library/feedback/add/hh450899(v=vs.85).aspx" />
<input id="isTopicRated" type="hidden" value="false" />




    


    <div id="ux-footer" class=" ltr">
        
            <div id="footerSock">
                <div id="footerSockInner">
                    <a name="feedback"></a>
                    <div data-fragmentName="Survey" id="Fragment_Survey" xmlns="http://www.w3.org/1999/xhtml">
  <div class="DetailedLink">
    
    <div class="Content"></div>
  </div>
</div>
<div class="rating">
    <div id="ratingSection1">
        <div class="title">
            Was this page helpful?
        </div>
        <div class="description">
            Your feedback about this content is important.<br />Let us know what you think.
        </div>
        <div class="buttons">
            <button id="ratingYes">Yes</button>
            <button id="ratingNo">No</button>
        </div>
        <input id="ratingValue" type="hidden" value="" />
    </div>
    <div id="ratingSection2">
        <div class="title">
            Additional feedback?
        </div>
        <textarea id="ratingText" rows="6" cols=""></textarea>
        <div class="buttons">
            <button id="ratingSubmit">Submit</button>
            <button id="ratingSkipThis">Skip this</button>
        </div>
    </div>
    <div id="ratingSection3">
        <div class="title">
            Thank you!
        </div>
        <div class="description">
            We appreciate your feedback.
        </div>
    </div>
    
    
    <div id="contentFeedbackQAContainer" style="display: none;"></div>
</div>


                    <div data-fragmentName="SockLinks" id="Fragment_SockLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317805" id="SockLinks_727_11" xmlns="http://www.w3.org/1999/xhtml">Find us on Facebook</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317806" id="SockLinks_727_12" xmlns="http://www.w3.org/1999/xhtml">Follow us on Twitter</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?linkid=285656" id="SockLinks_727_40" xmlns="http://www.w3.org/1999/xhtml">Read the hardware blog</a>
        </li>
      </ul>
    </div>
  </div>
</div>
                    <div class="clear"></div>
                </div>
            </div>
        <div id="footerContainer">
            <div id="fourColumnFooter">
                <div data-fragmentName="Column1" id="Fragment_Column1" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Centers</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://msdn.microsoft.com/windows" id="Column1_727_13" xmlns="http://www.w3.org/1999/xhtml">Dev Center Home</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/apps" id="Column1_727_14" xmlns="http://www.w3.org/1999/xhtml">Windows Store apps</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/ie" id="Column1_727_15" xmlns="http://www.w3.org/1999/xhtml">Internet Explorer</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/desktop" id="Column1_727_16" xmlns="http://www.w3.org/1999/xhtml">Desktop</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/hardware" id="Column1_727_17" xmlns="http://www.w3.org/1999/xhtml">Hardware</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column2" id="Fragment_Column2" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Related developer sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285634" id="Column2_727_18" xmlns="http://www.w3.org/1999/xhtml">Microsoft Connect</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285635" id="Column2_727_19" xmlns="http://www.w3.org/1999/xhtml">OSR Online</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282089" id="Column2_727_42" xmlns="http://www.w3.org/1999/xhtml">Visual Studio</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=280293" id="Column2_727_20" xmlns="http://www.w3.org/1999/xhtml">Windows Phone</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282087" id="Column2_727_43" xmlns="http://www.w3.org/1999/xhtml">Windows Server</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Other Windows sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285636" id="Column2_727_21" xmlns="http://www.w3.org/1999/xhtml">Enterprise</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285637" id="Column2_727_22" xmlns="http://www.w3.org/1999/xhtml">Small business</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285638" id="Column2_727_23" xmlns="http://www.w3.org/1999/xhtml">Students</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285639" id="Column2_727_24" xmlns="http://www.w3.org/1999/xhtml">Home users</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column3" id="Fragment_Column3" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Downloads</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285645" id="Column3_727_25" xmlns="http://www.w3.org/1999/xhtml">Windows Driver Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285646" id="Column3_727_26" xmlns="http://www.w3.org/1999/xhtml">Windows Assessment and Deployment Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285647" id="Column3_727_27" xmlns="http://www.w3.org/1999/xhtml">Windows Hardware Certification Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?LinkID=316548" id="Column3_727_29" xmlns="http://www.w3.org/1999/xhtml">Visual Studio Professional 2013</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285649" id="Column3_727_30" xmlns="http://www.w3.org/1999/xhtml">More downloads</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Support</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285664" id="Column3_727_44" xmlns="http://www.w3.org/1999/xhtml">Forums</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285663" id="Column3_727_45" xmlns="http://www.w3.org/1999/xhtml">More support options</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column4" id="Fragment_Column4" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Essentials</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285650" id="Column4_727_46" xmlns="http://www.w3.org/1999/xhtml">Recently published</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285651" id="Column4_727_47" xmlns="http://www.w3.org/1999/xhtml">Debugging</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=328186" id="Column4_727_48" xmlns="http://www.w3.org/1999/xhtml">Samples</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285653" id="Column4_727_49" xmlns="http://www.w3.org/1999/xhtml">Hardware dashboard</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=317804" id="Column4_727_50" xmlns="http://www.w3.org/1999/xhtml">Partner with Microsoft</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Stay connected</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285658" id="Column4_727_36" xmlns="http://www.w3.org/1999/xhtml">Microsoft events</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=313299" id="Column4_727_37" xmlns="http://www.w3.org/1999/xhtml">Windows App Builder Blog</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
            </div>

            <div id="baseFooterLogos">
                <span class="microsoftlogo" title="Microsoft"></span>
                <a href="http://msdn.microsoft.com/en-us" class="msdnlogo" title="MSDN"></a>
            </div>
        
            <div id="baseFooter">
                <div id="FooterCopyright">© 2014 Microsoft</div>
                <div data-fragmentName="BaseFooterContent" id="Fragment_BaseFooterContent" xmlns="http://www.w3.org/1999/xhtml">
  <div xmlns="http://www.w3.org/1999/xhtml">
    <div xmlns:mtps="http://msdn2.microsoft.com/mtps">
      <div data-fragmentName="BaseFooter" id="Fragment_BaseFooter">
        
        <div class="LinkList">
          <div class="Links">
            <ul class="LinkColumn horizontal">
              <li>
                <a href="http://msdn.microsoft.com/windows/apps/cc300389" id="BaseFooter_35351_1" xmlns="http://www.w3.org/1999/xhtml">Terms of Use</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx" id="BaseFooter_35351_2" xmlns="http://www.w3.org/1999/xhtml">Trademarks</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/info/privacy.mspx" id="BaseFooter_35351_3" xmlns="http://www.w3.org/1999/xhtml">Privacy and Cookies</a>
              </li>
              <li>
                <a href="http://msdn.microsoft.com/en-us/windows/dn554289" id="BaseFooter_730_5" xmlns="http://www.w3.org/1999/xhtml">Site map</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div data-fragmentName="HelloText" id="Fragment_HelloText">Hello from Seattle.
</div>
    </div>
  </div>
</div>  
                    <form class="selectLocale" id="selectLocaleForm" action="http://msdn.microsoft.com/en-us/windows/hardware/SelectLocale">
        <input type="hidden" name="fromPage" value="http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fhh450899(v%3dvs.85).aspx" />
        <a href="#" onclick="$('#selectLocaleForm').submit();return false;" title="Change your language">United States (English)</a>
    </form>    


                <div class="clear"></div>
            </div>
        </div>
    </div> 


            <div class="footerPrintView">
                <div class="footerCopyrightPrintView">© 2014 Microsoft. All rights reserved.</div>
            </div>

            
            
    


        
            <input id="MtpsDevice" type="hidden" value="Default" />


<![CDATA[ Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx. ]]>
        
            
            
            
            
            
        





<noscript><div><img alt="DCSIMG" id="Img1" width="1" height="1" src="http://m.webtrends.com/dcsmgru7m99k7mqmgrhudo0k8_8c6m/njs.gif?dcsuri=/nojavascript&amp;WT.js=No" /></div></noscript>









<noscript>
  <a href="http://www.omniture.com/" title="Web Analytics">
    <img src="http://msstonojsmsdn.112.2o7.net/b/ss/msstonojsmsdn/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" />
  </a>
</noscript>




<div id="globalRequestVerification">
    <input name="__RequestVerificationToken" type="hidden" value="Ct3awaTASvv68cl7BFe9SQslV-_nUCpg1nNf0SqUmxzDDiL0qYM46SrJy2d7vdm9peEcTMgkWixrhx8Z_3MSo6HdxDjhqAxBuH3FarILT0grARJOCf6HSHY4NEYLhsa4Q1zzjw2" />
</div>


        </div>
    <script type="text/javascript" class="mtps-injected">
/*<![CDATA[*/
(function(window,document){"use strict";function preload(scripts){for(var result=[],script,e,i=0;i<scripts.length;i++)script=scripts[i],script.hasOwnProperty("url")&&(e=document.createElement("script"),e.src=script.url,script.throwaway=e),result.push(script);return result}function inject(scripts,index){var script,elem;if(index>=scripts.length){delete mtps.injectScripts;return}script=scripts[index];elem=document.createElement("script");elem.className="mtps-injected";elem.async=!1;var isLoaded=!1,timeoutId=0,injectNextFnName="",injectNext=elem.onerror=function(){isLoaded||(isLoaded=!0,inject(scripts,index+1),window.clearTimeout(timeoutId),elem.onload=elem.onerror=elem.onreadystatechange=null,injectNextFnName&&delete mtps[injectNextFnName],elem.removeEventListener&&elem.removeEventListener("load",injectNext,!1))};elem.addEventListener?elem.addEventListener("load",injectNext,!1):elem.readyState==="uninitialized"?elem.onreadystatechange=function(){(this.readyState==="loaded"||this.readyState==="complete")&&injectNext()}:elem.onload=injectNext;script.hasOwnProperty("url")?(timeoutId=window.setTimeout(injectNext,12e4),elem.src=script.url):(injectNextFnName="_injectNextScript_"+index,mtps[injectNextFnName]=injectNext,timeoutId=window.setTimeout(injectNext,2e3),elem.text="try {\n"+script.txt+"\n} finally { MTPS."+injectNextFnName+" && MTPS."+injectNextFnName+"(); }");parent.appendChild(elem)}var mtps=window.MTPS||(window.MTPS={}),parent=document.getElementsByTagName("head")[0];mtps.injectScripts=function(scripts){inject(preload(scripts),0)}})(window,document);
MTPS.injectScripts([
	{ txt: "/**/\r\n(window.MTPS || (window.MTPS = {})).cdnDomains || (window.MTPS.cdnDomains = { \r\n\t\"image\": \"http://i.msdn.microsoft.com\", \r\n\t\"js\": \"http://i2.msdn.microsoft.com\", \r\n\t\"css\": \"http://i3.msdn.microsoft.com\"\r\n});\r\n/**/" },
	{ url: "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js" },
	{ txt: "//\n  var literalNormalizedUrl = \u0027/en-us/library/windows/hardware/hh450899(d=default,l=en-us,v=vs.85).aspx\u0027;\n  var wt_nvr_ru = \u0027WT_NVR_RU\u0027;\n  var wt_fpcdom = \u0027.microsoft.com\u0027;\n  var wt_domlist = \u0027msdn.microsoft.com\u0027;\n  var wt_pathlist = \u0027\u0027;\n  var wt_paramlist = \u0027DCSext.mtps_devcenter\u0027;\n  var wt_siteid = \u0027MSDN\u0027;\n  var gDomain = \u0027m.webtrends.com\u0027;\n  var gDcsId = \u0027dcsmgru7m99k7mqmgrhudo0k8_8c6m\u0027;\n  var gFpc = \u0027WT_FPC\u0027;\n\n\n\n  if (document.cookie.indexOf(gFpc + \"=\") == -1) {\n    var wtidJs = document.createElement(\"script\");\n    wtidJs.src = \"//\" + gDomain + \"/\" + gDcsId + \"/wtid.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(wtidJs);\n  }\n\n\n\n  var detectedLocale = \u0027en-us\u0027;\n  var wtsp = \u0027_msdn_\u0027;\n  var gTrackEvents = \u00270\u0027;\n/**/" },
	{ txt: "/**/\n  var omni_guid = \"8aa0b425-ccf8-4941-8320-fa3637d395b0\";\n/**/" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Utilities,0:Topic,1:webtrendsscript,2:omni_rsid_MSDN,3:SearchBox;/Areas/Epx/Content/Scripts:0,/Areas/Global/Content/Webtrends/resources:1,/Areas/Global/Content/Omniture/resources/MSDN:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=E93F43E708C4E79B13014A098239D120" },
	{ url: "http://i2.services.social.microsoft.com/search/Widgets/SearchBox.jss?boxid=HeaderSearchTextBox\u0026btnid=HeaderSearchButton\u0026brand=MSDN\u0026loc=en-us\u0026Refinement=182\u0026focusOnInit=false\u0026iroot=windows%2fhardware\u0026emptyWatermark=true\u0026searchButtonTooltip=Search" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Header,1:Toc,1:LibraryMemberFilter,2:Toc_Fixed,3:Rating,2:CodeSnippet,2:TopicNotInScope,2:CollapsibleArea,2:VersionSelector,2:SurveyBroker;/Areas/Epx/Themes/Windows/Content:0,/Areas/Library/Content:1,/Areas/Epx/Content/Scripts:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=2738C0CC18843CA9EAD45D501FB8031F" },
	{ txt: "$(document).ready(function() {\n        try {\n            var token = $(\"#globalRequestVerification input[name=\u0027__RequestVerificationToken\u0027]\").clone();\n            $(\"#siteFeedbackForm\").append(token);\n        } catch(err) {\n            \n        }\n    });" }
]);

/*]]>*/
</script></body>

<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/hh450899(v=vs.85).aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:00 GMT -->
</html>