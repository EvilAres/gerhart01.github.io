<!DOCTYPE html>

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en">
    
<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/jj923068.aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><link rel="canonical" href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923068.aspx" />
        <title>Trusted Execution Environment EFI Protocol</title>




<meta name="DCS.dcsuri" content="/en-us/library/windows/hardware/jj923068(d=default,l=en-us,v=win.10).aspx" />

<meta name="NormalizedUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923068(d=default,l=en-us,v=win.10).aspx" />

<meta name="ms.normalizedurl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923068(d=default,l=en-us,v=win.10).aspx" />

<meta name="VotingContextUrl" content="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923068(d=default,l=en-us,v=win.10).aspx" />

<meta name="MN" content="61C41DD6-9:59:02 AM" />

<meta name="Search.ShortId" content="jj923068" />

<meta name="ms.shortidmsdn" content="jj923068" />

<meta name="Ms.Locale" content="en-us" />







        
    <link rel="shortcut icon" href="http://msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Winlogo_favicon.ico" />

    <link rel="stylesheet" type="text/css" href="http://i3.msdn.microsoft.com/Combined.css?resources=0:Topic,0:CodeSnippet,0:ExpandableCollapsibleArea,1:CommunityContent,0:TopicNotInScope,0:FeedViewerBasic,0:ImageSprite,2:Header,2:sprite,1:Toc,1:NavigationResize,1:LibraryMemberFilter,2:Footer,3:DetailedLinkList,3:LinkList,4:Windows;/Areas/Epx/Content/Css:0,/Areas/Library/Content:1,/Areas/Epx/Themes/Windows/Content:2,/Areas/Epx/Themes/Base/Content:3,/Areas/Library/Themes/Windows/Content:4&amp;amp;hashKey=3FEA910FB0B7251DAF6A5F06B61EA8C8" /></head>
    <body class="library ">
        <div id="page">
            
            
  
            
    
    

    <div id="ux-header" class=" ltr">
        <div id="headerContainer">
            <div id="logoAndSearchBox">
                <div id="logo">
                    <a href="http://msdn.microsoft.com/windows/" title="Windows"><img alt="Windows" src="http://i.msdn.microsoft.com/Areas/Epx/Themes/Windows/Content/Windows_logo.png"></img></a>       
                </div>
              
        <div id="selectedTab">
            <a class="dropDownToggle" href="javascript:void(0);">Dev Center - Hardware</a>    
        </div>
    <div id="toclevel1_menu" style="display: none;">
        <ul>
                <li><a href="http://msdn.microsoft.com/windows/" title="Dev Center Home">Dev Center Home</a></li>
                <li><a href="http://msdn.microsoft.com/windows/apps/" title="Windows Store apps">Windows Store apps</a></li>
                <li><a href="http://msdn.microsoft.com/ie/" title="Internet Explorer">Internet Explorer</a></li>
                <li><a href="http://msdn.microsoft.com/windows/desktop/" title="Desktop">Desktop</a></li>
                <li><a href="http://msdn.microsoft.com/windows/hardware/" title="Hardware">Hardware</a></li>
        </ul>
        <div style="clear: both"></div>
    </div> 

                
                  

        <div class="SearchBox">   
            <form id="HeaderSearchForm" name="HeaderSearchForm" method="get" onsubmit="return Epx.Controls.SearchBox.searchBoxOnSubmit(this);">
            <input id="HeaderSearchTextBox" name="query" type="text" maxlength="200" onfocus="Epx.Controls.SearchBox.watermarkFocus(event, this.title)" onblur="Epx.Controls.SearchBox.watermarkBlur(event, this.title)" />            
            <button id="HeaderSearchButton" value="" type="submit" class="header-search-button"></button>
            </form>
         
                
                 
    
        </div>

                <div class="Clear"></div>
            </div>
            <div class="Clear"></div>
            <div class="ux-internav">
    <div class="toclevel2"> 
            <a class="normal" href="https://sysdev.microsoft.com/en-us/hardware/" title="Dashboard">Dashboard</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg507680" title="Get Started ">Get Started </a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/gg462970" title="Design">Design</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/ff960953" title="Develop">Develop</a>
            <a class="active" href="http://msdn.microsoft.com/windows/hardware/gg463010" title="Certify">Certify</a>
    </div>
    <div class="clear"></div>

            </div>
            <div id="signIn">

<a class="scarabLink" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=12&amp;ct=1395075542&amp;rver=6.0.5276.0&amp;wp=MCLBI&amp;wlcxt=MSDN%24MSDN%24MSDN&amp;wreply=http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fjj923068.aspx&amp;lc=1033&amp;id=254354&amp;mkt=en-US" title="Sign in">Sign in</a></div>

    

        </div>  
        <div id="blackBar">
    <div class="toclevel3"> 
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/hh833792" title="Get started">Get started</a>
            <a class="normal" href="http://msdn.microsoft.com/en-us/library/windows/hardware/dn423132" title="Requirements">Requirements</a>
            <a class="active" href="http://msdn.microsoft.com/windows/hardware/hh833788" title="Hardware Certification Kit">Hardware Certification Kit</a>
            <a class="normal" href="http://msdn.microsoft.com/en-us/library/windows/hardware/br230803.aspx" title="Dashboard services">Dashboard services</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/hh852371" title="Resources">Resources</a>
            <a class="normal" href="http://msdn.microsoft.com/windows/hardware/hh749017" title="Windows 7">Windows 7</a>
    </div>
    <div class="clear"></div>

        </div>
    </div>


        
            <div id="body">
                







    <div id="leftNav">



<div id="tocnav">
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj124227.aspx" id="dn260195_WIN.10_en-us" mtpsaliasid="" mtpsassetid="a80f332d-7a43-4312-b524-6cf51aab64ca_WIN.10_en-us" mtpsshortid="jj124227_WIN.10_en-us" title="Windows HCK User’s Guide">Windows HCK User’s Guide</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj124928.aspx" id="dn293582_WIN.10_en-us" mtpsaliasid="" mtpsassetid="e1472367-3b58-4f62-acb7-5730a440edd9_WIN.10_en-us" mtpsshortid="jj124928_WIN.10_en-us" title="Technical Reference">Technical Reference</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh998741.aspx" id="dn260292_WIN.10_en-us" mtpsaliasid="" mtpsassetid="4aee8fd9-87ff-4c6c-9eaa-028409549a52_WIN.10_en-us" mtpsshortid="hh998741_WIN.10_en-us" title="Test Reference">Test Reference</a>            </div>
            <div class="toclevel0" data-toclevel="0">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/hh998390.aspx" id="dn375909_WIN.10_en-us" mtpsaliasid="" mtpsassetid="30a0007a-2953-4b9c-96e0-41670db41aa1_WIN.10_en-us" mtpsshortid="hh998390_WIN.10_en-us" title="System.Fundamentals Testing">System.Fundamentals Testing</a>            </div>
            <div class="toclevel1" data-toclevel="1">
<a data-tochassubtree="true" href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj920132.aspx" id="dn375842_WIN.10_en-us" mtpsaliasid="" mtpsassetid="248b4346-15e8-48c1-ad84-5ac399929355_WIN.10_en-us" mtpsshortid="jj920132_WIN.10_en-us" title="Additional System Fundamentals Resources">Additional System Fundamentals Resources</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj920134.aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="TPM V2.0 Command and Signal Profile">TPM V2.0 Command and Signal Profile</a>            </div>
            <div class="toclevel2" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923067.aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Trusted Execution Environment ACPI Profile">Trusted Execution Environment ACPI Profile</a>            </div>
            <div class="toclevel2 current" data-toclevel="2">
<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj923068.aspx" mtpsaliasid="" mtpsassetid="" mtpsshortid="" title="Trusted Execution Environment EFI Protocol">Trusted Execution Environment EFI Protocol</a>            </div>
</div>
        

        

        
        
        <div id="toc-resizable-ew" class="toc-resizable-ew"></div>
        

<a id="NavigationResize" href="javascript:void(0)">
    <img class="cl_nav_resize_open" src="http://i3.msdn.microsoft.com/Areas/Epx/Content/Images/ImageSprite.png" title="Expand" alt="Expand" />
    <img class="cl_nav_resize_close" src="http://i3.msdn.microsoft.com/Areas/Epx/Content/Images/ImageSprite.png" title="Minimize" alt="Minimize" />
</a>



    </div>
<div id="content" class="content">







        
<div xmlns="http://www.w3.org/1999/xhtml">
<div class="topic" xmlns="http://www.w3.org/1999/xhtml" xmlns:mtps="http://msdn2.microsoft.com/mtps" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:cs="http://msdn.microsoft.com/en-us/">
  <h1 class="title">Trusted Execution Environment EFI Protocol</h1>
  
  <div id="mainSection">
    <div id="mainBody">
      <p>Licensing: Microsoft agrees to grant to you a no charge, royalty-free license to its Necessary Claims on reasonable and non-discriminatory terms solely to make, use, sell, offer for sale, import, or distribute any implementation of this specification. “Necessary Claims” are those claims of Microsoft-owned or Microsoft-controlled patents that are technically necessary to implement the required portions (which also include the required elements of optional portions) of this specification, where the functionality causing the infringement is described in detail and not merely referenced in this Specification.</p>
      <h2 class="heading">1.0 Introduction</h2>
      <div id="sectionSection0" class="section">
        <p>This document specifies an EFI protocol for interacting with a Trusted Execution Environment (TrEE), implementing TPM 2.0 functionality per a subset of a Trusted Computing Group (TCG) Trusted Platform Module 2.0 Library specification. This document also specifies platform firmware measurement requirements.  The EFI protocol defined herein leverages to a large degree [TCG06a] and [TCG06b].</p>
      </div>
      <h2 class="heading">2.0 Data Structures and Acronyms</h2>
      <div id="sectionSection1" class="section">
        <p>
          
        </p>
        <h3 class="subHeading">2.1 Data Structures</h3>
        <div class="subSection">
          <p>As in [TCG06a], all data values SHALL be represented in Little-Endian format. Strings SHALL be represented as an array of ASCII bytes with the left-most character placed in the lowest memory location.</p>
        </div>
        <h3 class="subHeading">2.2 Acronyms and Conventions</h3>
        <div class="subSection">
          <p>(For acronyms not defined herein, see [TCG06a])</p>
          <p>TrEETrusted Execution Environment</p>
          <p>Use of the terms “MUST” and “SHALL” in this document are to be interpreted in accordance with [RFC2119].</p>
        </div>
      </div>
      <h2 class="heading">3.0 EFI TrEE Protocol</h2>
      <div id="sectionSection2" class="section">
        <p>This section provides a detailed description of the EFI_TREE_PROTOCOL and the EFI_TREE_SERVICE_BINDING_PROTOCOL. The EFI TrEE Protocol is used to communicate with a TrEE.</p>
        <h3 class="subHeading">3.1 TrEE EFI Service Binding Protocol</h3>
        <div class="subSection">
          <p>This section defines the TrEE EFI service binding protocol.</p>
          <p>
            
          </p>
          <p>
            <strong>Summary</strong> - The EFI TrEE Service Binding Protocol is used to locate TrEE devices that are supported by an EFI TrEE Protocol driver and to create and destroy EFI TrEE protocol child driver instances that can use the underlying TrEE device.</p>
          <p>
            <strong>GUID</strong> - <code>#define EFI_TREE_SERVICE_BINDING_PROTOCOL_GUID \
  {0x4cf01d0a, 0xc48c, 0x4271, 0xa2, 0x2a, 0xad, 0x8e, 0x55, 0x97,\
   0x81, 0x88}</code></p>
          <p>
            <strong>Description</strong>An application (or driver) that requires TrEE services can use one of the protocol handler services, such as BS-&gt;LocateHandleBuffer(), to search for devices that publish an EFI TrEE Service Binding Protocol. Each device with a published the EFI TrEE Service Binding Protocol supports the EFI TrEE Protocol and may be available for use.</p>
          <p>After a successful call to the EFI_TREE_SERVICE_BINDING_PROTOCOL.CreateChild() function, the child EFI TrEE Protocol driver instance is ready for use.</p>
          <p>Before an EFI application or driver terminates execution, every successful call to the EFI_TREE_SERVICE_BINDING_PROTOCOL.CreateChild() function must be matched with a call to the EFI_TREE_SERVICE_BINDING_PROTOCOL.DestroyChild() function.</p>
        </div>
        <h3 class="subHeading">3.2 TrEE EFI Protocol</h3>
        <div class="subSection">
          <p>
            <strong>Summary</strong> - The EFI TrEE protocol is used to communicate with a TrEE – to send commands to a TrEE, use it for trusted execution operations and to provide access to the firmware log of measurements extended in the TrEE.  The protocol maintains an Event Log of measurements recorded in the TrEE with a format identical to the TCG 1.2 TCG Event Log (see [TCG06b]); referred to as the TrEE Event Log Format TCG 1.2 Event Log in this specification.  Implementers may create additional Event Logs with other formats, but this version of the protocol does not define a way to retrieve them.</p>
          <p>
            <strong>GUID</strong> - <code>#define EFI_TREE_PROTOCOL_GUID \
  {0x607f766c, 0x7455, 0x42be, 0x93, 0x0b, 0xe4, 0xd7, 0x6d, 0xb2,\
   0x72, 0x0f}</code></p>
          <p>
            <strong>Protocol Interface Structure</strong> - </p>
          
<div id="code-snippet-1" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_68c6e536-4398-4d38-8a1d-765614426301');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_68c6e536-4398-4d38-8a1d-765614426301" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef struct _EFI_TREE_PROTOCOL {
  EFI_TREE_GET_CAPABILITYGetCapability;
  EFI_TREE_GET_EVENT_LOGGetEventLog;
  EFI_TREE_HASH_LOG_EXTEND_EVENTHashLogExtendEvent;
  EFI_TREE_SUBMIT_COMMANDSubmitCommand;
} EFI_TREE_PROTOCOL;
</pre></div>
            
        </div>
    </div>
</div>

          <p>
            <strong>Parameters</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>GetCapability</p>
              </td>
              <td>
                <p>This service provides information about the TrEE and firmware capabilities</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>GetEventLog</p>
              </td>
              <td>
                <p>Get a pointer to a firmware event log</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>HashLogExtendEvent</p>
              </td>
              <td>
                <p>This service will cause the EFI TrEE driver to extend an event and (optionally) write the event to the TrEE log.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>SubmitCommand</p>
              </td>
              <td>
                <p>This service submits a command directly to the TrEE.</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Description</strong> - The EFI_TREE_PROTOCOL abstracts TrEE activity. This protocol instance provides a Boot Service and is instantiated as a Boot Service Driver. </p>
          <p>Boot Service Drivers are terminated when ExitBootServices ( ) is called and all memory resources consumed by the Boot Services Drivers are released for use in the operating system environment.</p>
          <p>This Boot Service must create an EVT_SIGNAL_EXIT_BOOT_SERVICES event. This event will be notified by the system when ExitBootServices ( ) is invoked. </p>
          <p>EVT_SIGNAL_EXIT_BOOT_SERVICES is a synchronous event used to ensure that certain activities occur following a call to a specific interface function; in this case, that is the cleanup that needs to be done in response to the ExitBootServices ( ) function. ExitBootServices ( ) cannot clean up on behalf of drivers that have been loaded into the system. The drivers have to do that for themselves by creating an event whose type is EVT_SIGNAL_EXIT_BOOT_SERVICES and whose notification function is a function within the driver itself. Then, when ExitBootServices ( ) has finished its cleanup, it signals the event type EVT_SIGNAL_EXIT_BOOT_SERVICES.</p>
          <p>For implementation details about how a Boot Service instantiated as an EFI Driver creates this required EVT_SIGNAL_EXIT_BOOT_SERVICES event, see Section 6.1 of [UEFI12].</p>
        </div>
        <h3 class="subHeading">3.3 EFI_TREE_PROTOCOL.GetCapability</h3>
        <div class="subSection">
          <p>The EFI_TREE_PROTOCOL GetCapability function call provides protocol capability information and state information about the TrEE.</p>
          <p>
            <strong>Prototype</strong>
          </p>
          
<div id="code-snippet-2" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_8b047e2c-983e-451f-8424-51c1220b509a');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_8b047e2c-983e-451f-8424-51c1220b509a" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef
EFI_STATUS
(EFIAPI *EFI_TREE_GET_CAPABILITY) (
  IN EFI_TREE_PROTOCOL      *This,
  IN OUT TREE_BOOT_SERVICE_CAPABILITY*ProtocolCapability,
);
</pre></div>
            
        </div>
    </div>
</div>

          <p>Parameters</p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  <em>This</em>
                </p>
              </td>
              <td>
                <p>Indicates the calling context.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>ProtocolCapability</p>
              </td>
              <td>
                <p>The caller allocates memory for a TREE_BOOT_SERVICE_CAPABILITY structure and sets the size field to the size of the structure allocated. The callee fills in the fields with the EFI protocol capability information and the current TrEE state information up to the number of fields which fit within the size of the structure passed in.</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Related Definitions</strong>
          </p>
          
<div id="code-snippet-3" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_cbfdc6f4-6ec6-420b-aea6-4e12f12da21d');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_cbfdc6f4-6ec6-420b-aea6-4e12f12da21d" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef struct _TREE_VERSION { 
  UINT8 Major; 
  UINT8 Minor; 
} TREE_VERSION;
typedef UINT64 EFI_PHYSICAL_ADDRESS;
typedef UINT32 TREE_EVENT_LOG_BITMAP;
typedef UINT32 TREE_EVENT_LOG_FORMAT;
#define TREE_EVENT_LOG_FORMAT_TCG_1_2 0x00000001
typedef struct _TREE_BOOT_SERVICE_CAPABILITY { 
  UINT8 Size;
  TREE_VERSION StructureVersion; 
  TREE_VERSION ProtocolVersion;
  UINT32 HashAlgorithmBitmap;
  TREE_EVENT_LOG_BITMAPSupportedEventLogs;
  BOOLEAN TrEEPresentFlag;
  UINT16MaxCommandSize;
  UINT16MaxResponseSize;
  UINT32ManufacturerID;  
} TREE_BOOT_SERVICE_CAPABILITY;

#define TREE_BOOT_HASH_ALG_SHA1       0x00000001
#define TREE_BOOT_HASH_ALG_SHA256     0x00000002
#define TREE_BOOT_HASH_ALG_SHA384     0x00000004
#define TREE_BOOT_HASH_ALG_SHA512     0x00000008
</pre></div>
            
        </div>
    </div>
</div>

          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  <em>Size</em>
                </p>
              </td>
              <td>
                <p>Allocated size of the structure passed in</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>StructureVersion</p>
              </td>
              <td>
                <p>Version of the TREE_BOOT_SERVICE_CAPABILITY structure itself. For this version of the protocol, the <em>Major</em> version shall be set to 1 and the <em>Minor </em>version shall be set to 0.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>ProtocolVersion</p>
              </td>
              <td>
                <p>Version of the TrEE protocol. For this version of the protocol, the <em>Major</em> version shall be set to 1 and the <em>Minor</em> version shall be set to 0.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>HashAlgorithmBitMap</p>
              </td>
              <td>
                <p>Supported hash algorithms</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>SupportedEventLogs</p>
              </td>
              <td>
                <p>Bitmap of supported event log formats (see above)</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>TrEEPresentFlag</p>
              </td>
              <td>
                <p>False = TrEE not present</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>MaxCommandSize</p>
              </td>
              <td>
                <p>Max size (in bytes) of a command that can be sent to the TrEE</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>MaxResponseSize</p>
              </td>
              <td>
                <p>Max size (in bytes) of a response that can be provided by the TrEE</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>ManufacturerID</p>
              </td>
              <td>
                <p>4-byte Vendor ID (see [TCG07], “TPM Capabilities Vendor ID” section)</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Description</strong>
          </p>
          <p>The EFI_TREE_PROTOCOL Get Capability function call provides EFI protocol version and capability information as well as state information about the TrEE. The caller must set the Size field of the TREE_BOOT_SERVICE_CAPABILITY structure allocated.  It is expected future versions of this function call may add additional fields to the structure.  The Size value passed in will enable the function to only populate fields the caller allocated memory for.    For example:</p>
          <p>ProtocolCapability.Size = sizeof(TREE_BOOT_SERVICE_CAPABILITY);</p>
          <p>For this version of the specification:</p>
          <ol class="ordered">
            <li>
									If the This or the ProtocolCapability parameters are NULL, the functional call will return EFI_INVALID_PARAMETER.<br /><br /></li>
            <li>
									If the input ProtocolCapability.Size &lt; sizeof(TREE_BOOT_SERVICE_CAPABILITY) the function will set ProtocolCapability.Size equal to sizeof(TREE_BOOT_SERVICE_CAPABILITY) as defined in this specification and will return the error code EFI_BUFFER_TOO_SMALL, the values of the remaining fields will be undefined.<br /><br /></li>
            <li>
									The following return values MUST be set:<br /><br />
									ProtocolCapability.StructureVersion.Major = 1<br />ProtocolCapability.StructureVersion.Minor = 0<br />ProtocolCapability.ProtocolVersion.Major = 1<br />ProtocolCapability.ProtocolVersion.Minor = 0<br /><br /></li>
            <li>
									If the platform does not have a TrEE then the following values MUST be returned:<br /><br />
									ProtocolCapability.SupportedEventLogs = 0<br />ProtocolCapability.HashAlgorithmBitmap = 0<br />ProtocolCapability.TrEEPresentFlag = FALSE<br />ProtocolCapability.MaxCommandSize = 0<br />ProtocolCapability.MaxResponseSize = 0<br />ProtocolCapability.ManufacturerID = 0<br /><br /></li>
            <li>
									The minimum MaxCommandSize and MaxResponseSize MUST be 0x500 (or greater) for Windows.<br /><br /></li>
          </ol>
          <p>
            <strong>Status Codes Returned</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>EFI_SUCCESS </p>
              </td>
              <td>
                <p>Operation completed successfully. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_DEVICE_ERROR </p>
              </td>
              <td>
                <p>The command was unsuccessful.   The <em>ProtocolCapability</em> variable will not be populated. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_INVALID_PARAMETER </p>
              </td>
              <td>
                <p>One or more of the parameters are incorrect. The <em>ProtocolCapability</em> variable will not be populated. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_BUFFER_TOO_SMALL</p>
              </td>
              <td>
                <p>The <em>ProtocolCapability</em> variable is too small to hold the full response. It will be partially populated (required <em>Size</em> field will be set).</p>
              </td>
            </tr>
          </table>
        </div>
        <h3 class="subHeading">3.4 EFI_TREE_PROTOCOL.GetEventLog</h3>
        <div class="subSection">
          <p>The EFI_TREE_PROTOCOL Get Event Log function call allows a caller to retrieve the address of a given event log and its last entry.</p>
          <p>
            <strong>Prototype</strong>
          </p>
          
<div id="code-snippet-4" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_19883ee5-53cb-4b0a-90c4-3c37ed2ff5d3');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_19883ee5-53cb-4b0a-90c4-3c37ed2ff5d3" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef
EFI_STATUS
(EFIAPI *EFI_TREE_GET_EVENT_LOG) (
  IN  EFI_TREE_PROTOCOL      *This,
  IN  TREE_EVENT_LOG_FORMATEventLogFormat,
  OUT EFI_PHYSICAL_ADDRESS*EventLogLocation,
  OUT EFI_PHYSICAL_ADDRESS*EventLogLastEntry,
  OUT BOOLEAN*EventLogTruncated
);
</pre></div>
            
        </div>
    </div>
</div>

          <p>
            <strong>Parameters</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  <em>EventLogFormat</em>
                </p>
              </td>
              <td>
                <p>The type of the event log for which the information is requested.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>EventLogLocation </em>
                </p>
              </td>
              <td>
                <p>A pointer to the memory address of the event log. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>EventLogLastEntry</em>
                </p>
              </td>
              <td>
                <p>If the Event Log contains more than one entry, this is a pointer to the address of the start of the last entry in the event log in memory. For information about what values are returned in this parameter in the special cases of an empty Event Log or an Event Log with only one entry, see the Description section below. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>EventLogTruncated</em>
                </p>
              </td>
              <td>
                <p>If the Event Log is missing at least one entry because an event would have exceeded the area allocated for events, this value is set to TRUE.  Otherwise, the value will be FALSE and the Event Log will be complete.</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Description</strong>
          </p>
          <p>The firmware manages an Event Log of the measurements recorded in the TrEE during the boot process.  During the boot process, before UEFI platform initialization, an entry is made in the Event Log for each measurement extended in the TrEE.    In the UEFI environment, each time a call is made to HashLogExtendEvent to extend a measurement in the TrEE, an event is generally recorded in the Event Log containing the extended measurement.  If the area allocated by firmware for the Event Log was too small to hold all events added, the function call indicates the Event Log was truncated and has missing entries.  This version of the specification only requires an Event Log of SHA1 measurements to be maintained.  Future versions of this specification may maintain additional Event Logs supporting different hash algorithms.</p>
          <p>The Event Log area returned by this function is released when ExitBootServices ( ) is called.  Callers of this method MUST not access the area after ExitBootServices ( ) has been called.For this version of the specification:</p>
          <ol class="ordered">
            <li>
									If EventLogFormat does not equal TREE_EVENT_LOG_FORMAT_TCG_1_2, the function call MUST return EFI_INVALID_PARAMETER.<br /><br /></li>
            <li>
									If no TrEE is present the function MUST set the following values and return EFI_SUCCESS:<br /><br /><ol class="ordered"><li>
											EventLogLocation = NULL<br /><br /></li><li>
											EventLogLastEntry = NULL<br /><br /></li><li>
											EventLogTruncated = FALSE<br /><br /></li></ol></li>
            <li>
									The EventLogLocation value MUST be set to the start of the specified event log format in memory<br /><br /></li>
            <li>
									If the specified event log:<br /><br /><ol class="ordered"><li>
											does not contain any events then EventLogLastEntry MUST be set to 0<br /><br /></li><li>
											contains exactly one entry then EventLogLastEntry MUST be set to the same value as  EventLogLocation<br /><br /></li><li>
											contains more than one event then EventLogLastEntry MUST be set to the start address of the last event of the specified Event Log<br /><br /></li></ol></li>
            <li>
									If a prior call to EFI_TREE_PROTOCOL.HashLogExtendEvent returned EFI_VOLUME_FULL then EventLogTruncated MUST be set to TRUE, otherwise it MUST be set to FALSE.<br /><br /></li>
          </ol>
          <p>
            <strong>Status Codes Returned</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>EFI_SUCCESS </p>
              </td>
              <td>
                <p>Operation completed successfully. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_INVALID_PARAMETER </p>
              </td>
              <td>
                <p>One or more of the parameters are incorrect (e.g. asking for an event log whose format is not supported).</p>
              </td>
            </tr>
          </table>
        </div>
        <h3 class="subHeading">3.5 EFI_TREE_PROTOCOL.HashLogExtendEvent</h3>
        <div class="subSection">
          <p>The EFI_TREE_PROTOCOL HashLogExtendEvent function call provides callers with an opportunity to extend and optionally log events without requiring knowledge of actual TPM commands.The extend operation will occur even if this function cannot create an event log entry (e.g. due to the event log being full).</p>
          <p>
            <strong>Prototype</strong>
          </p>
          
<div id="code-snippet-5" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_ad62f34a-674d-40bc-a093-15b22ba4c290');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_ad62f34a-674d-40bc-a093-15b22ba4c290" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef
EFI_STATUS
(EFIAPI * EFI_TREE_HASH_LOG_EXTEND_EVENT) (
  IN EFI_TREE_PROTOCOL*This,
  IN UINT64Flags,
  IN EFI_PHYSICAL_ADDRESSDataToHash,
  IN UINT64DataToHashLen,
  IN TrEE_EVENT*Event,
);
</pre></div>
            
        </div>
    </div>
</div>

          <p>
            <strong>Parameters</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  <em>This </em>
                </p>
              </td>
              <td>
                <p>Indicates the calling context.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>Flags</em>
                </p>
              </td>
              <td>
                <p>Bitmap providing additional information (see below).</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>DataToHash</em>
                </p>
              </td>
              <td>
                <p>Physical address of the start of the data buffer to be </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>hashed.</p>
              </td>
              <td>
                <p>
                  
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>DataToHashLen</em>
                </p>
              </td>
              <td>
                <p>The length in bytes of the buffer referenced by <em>DataToHash</em>.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>Event</em>
                </p>
              </td>
              <td>
                <p>Pointer to data buffer containing information about the event.</p>
              </td>
            </tr>
          </table>
          <p>Related Definitions</p>
          
<div id="code-snippet-6" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_08320a9e-4db0-4331-a5b9-434c34e2ffb1');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_08320a9e-4db0-4331-a5b9-434c34e2ffb1" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
#pragma pack(1)
typedef struct _TrEE_EVENT {
  UINT32Size;            
  TrEE_EVENT_HEADERHeader;
  UINT8Event[ANYSIZE_ARRAY];
} TrEE_EVENT;
typedef struct _TrEE_EVENT_HEADER {
  UINT32HeaderSize;
  UINT16HeaderVersion;
  TrEE_PCRINDEXPCRIndex;
  TrEE_EVENTTYPEEventType;
} TrEE_EVENT_HEADER;
#pragma pack()
typedef UINT32 TrEE_PCRINDEX;
typedef UINT32 TrEE_EVENTTYPE;
</pre></div>
            
        </div>
    </div>
</div>

          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  <em>Size</em>
                </p>
              </td>
              <td>
                <p>Total size of the event including the Size component, the header and the <em>Event </em>data.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>HeaderSize</em>
                </p>
              </td>
              <td>
                <p>Size of the event header itself (sizeof(TrEE_EVENT_HEADER)).</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>HeaderVersion</em>
                </p>
              </td>
              <td>
                <p>Header version. For this version of this specification, the value shall be 1. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>PCRIndex</em>
                </p>
              </td>
              <td>
                <p>Index of the PCR that shall be extended (0 – 23).</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>EventType</em>
                </p>
              </td>
              <td>
                <p>Type of the event that shall be extended (and optionally logged).</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Flag Values</strong>
          </p>
          <p>The Flags variable is a bitmap providing additional data as follows:</p>
          
<div id="code-snippet-7" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_63fc15a0-df58-4c3b-bdcd-0e1ddd514354');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_63fc15a0-df58-4c3b-bdcd-0e1ddd514354" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
#define TREE_EXTEND_ONLY 0x0000000000000001
</pre></div>
            
        </div>
    </div>
</div>

          <p> This bit is shall be set when an event shall be extended but not logged. </p>
          
<div id="code-snippet-8" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_0d5b87ea-8a21-4b7c-9f20-11931207a366');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_0d5b87ea-8a21-4b7c-9f20-11931207a366" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
#define PE_COFF_IMAGE 0x0000000000000010
</pre></div>
            
        </div>
    </div>
</div>

          <p>This bit shall be set when the intent is to measure a PE/COFF image.  </p>
          <p>
            <strong>Description</strong>
          </p>
          <p>The EFI_TREE_PROTOCOL Hash Log Extend Event function call calculates the measurement of a data buffer (possibly containing a PE/COFF binary image) and causes the TrEE driver to extend the measurement. In addition, the service optionally creates an event log entry and appends it to the Event Log for each event log format supported by the service.  The service allows a caller to make use of the TrEE without knowing anything about specific TrEE commands.</p>
          <p>The use of this function to measure PE/COFF images must be done before relocations have been applied to the image.  Note:  Use caution using this method to measure PE/COFF images.  Generally implementations that load PE/COFF images strip important data during the load process from the image and may change the image section alignment in memory.  The net result is calculating the hash of an in-memory image does not match the actual measurement for the image as properly calculated when it is loaded from storage media.</p>
          <p>Upon invocation, the function shall perform the following actions:</p>
          <ol class="ordered">
            <li>
									If any of the parameters This, DataToHash, or Event are NULL, the function MUST return EFI_INVALID_PARAMETER.<br /><br /></li>
            <li>
									If the Event.Size is less than Event.Header.HeaderSize + sizeof(UINT32), the function MUST return  EFI_INVALID_PARAMETER.<br /><br /></li>
            <li>
									If the Event.Header.PCRIndex is not 0 through 23, inclusive, the function MUST return EFI_INVALID_PARAMETER.<br /><br /></li>
            <li>
									If the Flags bitmap has the PE_COFF_IMAGE bit SET but the PE/COFF image is corrupt or not understood the function MUST return EFI_UNSUPPORTED.<br /><br /></li>
            <li>
									The function allows any value for the Event.Header.EventType parameter.<br /><br /></li>
            <li>
									The function MUST calculate the digest (measurement) of the data starting at DataToHash with a length of DataToHashLen. When the PE_COFF_IMAGE bit is set, the function MUST calculate the measurement of the PE/COFF image in accordance with “Measuring a PE/COFF image” in Appendix A below.<br /><br /></li>
            <li>
									The function MUST successfully send the TPM2_PCR_Extend command to the TrEE to extend the PCR indicated by Event.Header.PCRIndex with the measurement digest.  If the command cannot be sent successfully, the function must return EFI_DEVICE_ERROR.  If the firmware supports more algorithms than SHA1 it may calculate digests using other algorithms and extend them too.<br /><br /></li>
            <li>
									If a previous call to this function returned EFI_VOLUME_FULL and the TREE_EXTEND_ONLY bit is set in the Flags parameter, the function MUST return EFI_VOLUME_FULL.  (No attempt is made to add the event log entry to the event log(s).)<br /><br /></li>
            <li>
									The function MUST build a TCG Event Log entry as follows:  (Note:  The TCG_PCR_EVENT structure is defined in [TCG06b] and shall be considered byte-aligned.)<br /><br /><ol class="ordered"><li>
											TCG_PCR_EVENT.PCRIndex = Event.Header.PCRIndex<br /><br /></li><li>
											TCG_PCR_EVENT.EventType = Event.Header.EventType<br /><br /></li><li>
											TCG_PCR_EVENT.Digest = &lt;the SHA1 measurement digest calculated above&gt;<br /><br /></li><li>
											TCG_PCR_EVENT.EventSize = Event.Size – sizeof(UINT32) - Event.Header.HeaderSize<br /><br /></li><li>
											TCG_PCR_EVENT.Event = Event.Event (Note:  this is a memory copy of EventSize bytes)<br /><br /></li></ol></li>
            <li>
									The function MAY build similar event log entries for other supported Event Log formats.<br /><br /></li>
            <li>
									If the TCG_PCR_EVENT Event Log entry created above does not fit in the area allocated for the TrEE Event Log Format TCG 1.2 Event Log, the function MUST return EFI_VOLUME_FULL.<br /><br /></li>
            <li>
									If the firmware supports additional Event Log formats and any of the events created for those event logs would exceed the area allocated for the Event Log, the function MUST return EFI_VOLUME_FULL.<br /><br /></li>
            <li>
									The function MUST append the events created to their corresponding event logs and the service MUST update its internal pointer to the start of the last event for each Event Log.<br /><br /></li>
          </ol>
          <p>
            <strong>Status Codes Returned.</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  
                </p>
                <p>EFI_SUCCESS </p>
              </td>
              <td>
                <p>Operation completed successfully. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_DEVICE_ERROR </p>
              </td>
              <td>
                <p>The command was unsuccessful. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_VOLUME_FULL</p>
              </td>
              <td>
                <p>The extend operation occurred, but the event could not be written to one or more event logs.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_INVALID_PARAMETER </p>
              </td>
              <td>
                <p>One or more of the parameters are incorrect. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_UNSUPPORTED</p>
              </td>
              <td>
                <p>The PE/COFF image type is not supported.</p>
              </td>
            </tr>
          </table>
        </div>
        <h3 class="subHeading">3.6 EFI_TREE_PROTOCOL.SubmitCommand</h3>
        <div class="subSection">
          <p>This service enables the sending of commands to the TrEE.</p>
          <p>
            <strong>Prototype</strong>
          </p>
          
<div id="code-snippet-9" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_9d65858e-f426-4f8a-acd7-3ff312c1b46a');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_9d65858e-f426-4f8a-acd7-3ff312c1b46a" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
typedef
EFI_STATUS
(EFIAPI *EFI_TREE_SUBMIT_COMMAND) (
  IN EFI_TREE_PROTOCOL*This,
  IN UINT32InputParameterBlockSize,
  IN UINT8*InputParameterBlock,
  IN UINT32OutputParameterBlockSize,
  IN UINT8*OutputParameterBlock 
);
</pre></div>
            
        </div>
    </div>
</div>

          <p>
            <strong>Parameters</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>
                  
                </p>
                <p>
                  <em>This</em>
                </p>
              </td>
              <td>
                <p>Indicates the calling context.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>InputParameterBlockSize</em>
                </p>
              </td>
              <td>
                <p>Size of the TrEE input parameter block.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>InputParameterBlock</em>
                </p>
              </td>
              <td>
                <p>Pointer to the TrEE input parameter block.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>OutputParameterBlockSize</em>
                </p>
              </td>
              <td>
                <p>Size of the TrEE output parameter block.</p>
              </td>
            </tr>
            <tr>
              <td>
                <p>
                  <em>OutputParameterBlock</em>
                </p>
              </td>
              <td>
                <p>Pointer to the TrEE output parameter block.</p>
              </td>
            </tr>
          </table>
          <p>
            <strong>Description</strong>
          </p>
          <p>The EFI_TREE_PROTOCOL Submit Command function call provides a pass-through capability from the caller to the system’s TrEE.</p>
          <p>The caller is responsible for building the command byte-stream to be sent to the TrEE and is also responsible for interpreting the resulting byte-stream returned by the TrEE. The TrEE in and out operands for each TrEE command are defined elsewhere.</p>
          <p>Note that the returned status codes reflect the outcome of the function invocation and not the success (or failure) of the underlying TrEE command.</p>
          <p>The TPM 2.0 MUST not return TPM2_RC_RETRY prior to the completion of the call to ExitBootServices().  (The reason for this requirement is the return code would block the boot process until the TPM command could be compeleted.)</p>
          <p>The TPM 2.0 MUST have access to its persistent storage prior to the call to ExitBootServices completing.  If TPM 2.0 implementation MAY not have access to persistent storage after the call to ExitBootServices, please contact Microsoft for additional requirements.</p>
          <p>
            <strong>Status Codes Returned</strong>
          </p>
          <h3 class="subHeading"> </h3>
          <table>
            <tr>
              <td>
                <p>EFI_SUCCESS </p>
              </td>
              <td>
                <p>The command byte stream was successfully sent to the device and a response was successfully received. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_DEVICE_ERROR </p>
              </td>
              <td>
                <p>The command was not successfully sent to the device or a response was not successfully received from the device. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_INVALID_PARAMETER </p>
              </td>
              <td>
                <p>One or more of the parameters are incorrect. </p>
              </td>
            </tr>
            <tr>
              <td>
                <p>EFI_BUFFER_TOO_SMALL </p>
              </td>
              <td>
                <p>The output parameter block is too small. </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <h2 class="heading">References</h2>
      <div id="sectionSection3" class="section">
        <h3 class="subHeading"> </h3>
        <table>
          <tr>
            <td>
              <p>[MSFT08]</p>
            </td>
            <td>
              <p>Microsoft Corporation, “Windows Authenticode Portable Executable Signature Format,” Version 1.0, March 21, 2008.</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>[RFC2119]</p>
            </td>
            <td>
              <p>Bradner, S., “Keywords for Use in RFCs to Indicate Requirement Levels,” IETF RFC 2119, March 1997.</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>[TCG06a]</p>
            </td>
            <td>
              <p>Trusted Computing Group, “TCG EFI Protocol,” Version 1.20 Revision 1.00, June 9, 2006.</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>[TCG06b]</p>
            </td>
            <td>
              <p>Trusted Computing Group, “TCG EFI Platform Specification,” Version 1.20 Revision 1.0, June 7, 2006.</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>[TCG07]</p>
            </td>
            <td>
              <p>Trusted Computing Group, “TCG Vendor ID Registry,” Version 1.0, Revision 0.1, August 31, 2007.</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>[UEFI12]</p>
            </td>
            <td>
              <p>UEFI, “Unified Extensible Firmware Interface Specification,” Version 2.3.1 Errata C,</p>
            </td>
          </tr>
          <tr>
            <td>
              <p>June 2012.</p>
            </td>
            <td>
              <p>
                
              </p>
            </td>
          </tr>
        </table>
      </div>
      <h2 class="heading">Appendix A: Static Root of Trust Measurements</h2>
      <div id="sectionSection4" class="section">
        <div class="alert">
          <table>
            <tr>
              <th align="left">
                <img id="Important" alt="Important" src="http://i.msdn.microsoft.com/areas/global/content/clear.gif" title="Important" xmlns="" class="cl_IC160177" />Important </th>
            </tr>
            <tr>
              <td>
						Appendix A implementation of PCR[7] measurements is mandatory for InstantGo systems.<p></p></td>
            </tr>
          </table>
          <p>
            
          </p>
        </div>
        <p>At a high level, firmware is responsible for measuring the following components during boot:</p>
        <ul>
          <li class="unordered">
							Platform firmware that contains or measures the UEFI Boot Services and UEFI Runtime Services<br /><br /></li>
          <li class="unordered">
							Security relevant variables associated with platform firmware<br /><br /></li>
          <li class="unordered">
							UEFI drivers or boot applications loaded separately<br /><br /></li>
          <li class="unordered">
							Variables associated with separately loaded UEFI Drivers or UEFI Boot applications<br /><br /></li>
        </ul>
        <p>The above measurements are defined by the TCG EFI Platform specification [TCG06b] Sections 5.1 – 5.5 and are not referred to further herein. Measurements into PCR[1] and PCR[3] are optional depending on platform configuration.</p>
        <p>For Windows, PCR[7] is used to reflect the UEFI 2.3.1 Secure Boot policy.  This policy relies on the firmware authenticating all boot components launched prior to the UEFI environment and the UEFI platform initialization code (or earlier firmware code) invariantly recording the Secure Boot policy information into PCR[7].</p>
        <p>Platform firmware adhering to the policy must therefore measure the following values into PCR[7]:</p>
        <ol class="ordered">
          <li>
							The contents of the PK variable<br /><br /></li>
          <li>
							The contents of the KEK variable<br /><br /></li>
          <li>
							The contents of the EFI_IMAGE_SECURITY_DATABASE variable<br /><br /></li>
          <li>
							The contents of the EFI_IMAGE_SECURITY_DATABASE1 variable<br /><br /></li>
          <li>
							Entries in the EFI_IMAGE_SECURITY_DATABASE that are used to validate EFI Drivers or EFI Boot Applications in the boot path<br /><br /></li>
          <li>
							The contents of the SecureBoot variable<br /><br /></li>
        </ol>
        <p>Because of the above, UEFI variables PK, KEK, EFI_IMAGE_SECURITY_DATABASE, EFI_IMAGE_SECURITY_DATABASE1 and SecureBoot SHALL NOT be measured into PCR[3].</p>
        <p>In addition, if the platform provides a firmware debugger which may be launched prior to the UEFI environment, it MUST record this fact in PCR[7]. Likewise, if the platform provides a debugger for the UEFI environment, launch of the debugger MUST be recorded in PCR[7].</p>
        <p>
          <strong>Implementation Note</strong>
        </p>
        <p>The UEFI LoadImage function MUST record measurements in PCR[2] or PCR[4] per events described in  [TCG06b] and also PCR[7] per  events described in the section “Measuring UEFI Configuration into PCR[7]” below.  To determine whether an image measurement applies to PCR[2] or PCR[4], LoadImage MUST examine the Subsystem field in the PE/COFF image.  The values IMAGE_SUBSYSTEM_EFI_BOOT_SERVICE_DRIVER, IMAGE_SUBSYSTEM_EFI_RUNTIME_DRIVER and IMAGE_SUBSYSTEM_EFI_ROM  correspond to PCR[2].  The value IMAGE_SUBSYSTEM_EFI_APPLICATION corresponds to PCR[4].  If the loaded image is some other type, it MUST be recorded in PCR[4].  Images that LoadImage fails to load due to (a) signature verification failure or (b) because the image does not comply with currently enforced UEFI 2.3.1 Secure Boot policy do not need to be measured in a PCR.</p>
        <p>Related Definitions</p>
        
<div id="code-snippet-10" class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:if (window.epx.codeSnippet)window.epx.codeSnippet.copyCode('CodeSnippetContainerCode_83372651-2c2d-46f2-a979-4b947b681178');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_83372651-2c2d-46f2-a979-4b947b681178" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>
#define EV_EFI_VARIABLE_DRIVER_CONFIG \
                                  0x80000001 /* Defined in [TCG06b] */
#define EV_EFI_ACTION             0x80000007 /* Defined in [TCG06b] */
#define EV_EFI_VARIABLE_AUTHORITY 0x800000E0

This specification requires a modified TCG structure definition for EFI_VARIABLE_DATA.  The revised structure is:
typedef struct {
  EFI_GUIDVariableName;
  UINT64        UnicodeNameLength;    // The TCG Defintion used UINTN
  UINT64        VariableDataLength;   // The TCG Defintion used UINTN
  CHAR16       UnicodeName[1];
  INT8         VariableData[1];   
} EFI_VARIABLE_DATA;
</pre></div>
            
        </div>
    </div>
</div>

        <p>
          <strong>Measuring a PE/COFF Image</strong>
        </p>
        <p>When measuring a PE/COFF image, the EventType shall be as defined in [TCG06b] (for example, when measuring an EFI Boot Application, the EventType shall be EV_EFI_BOOT_SERVICES_APPLICATION) and the Event value shall be the value of the EFI_IMAGE_LOAD_EVENT structure defined in [TCG06b].</p>
        <p>The HashLogExtendEvent service MUST hash the PE/COFF image in accordance with the procedure specified in “Calculating the PE Image Hash” section of [MSFT08].</p>
        <p>
          <strong>Measuring UEFI Configuration into PCR[7]</strong>
        </p>
        <p>For all EFI variable value events, the EventType shall be EV_EFI_VARIABLE_DRIVER_CONFIG defined above and the Event value shall be the value of the EFI_VARIABLE_DATA structure defined above in this specification (this structure shall be considered byte-aligned).  The measurement digest shall be the SHA-1 hash of the event data which is the EFI_VARIABLE_DATA structure.  (Note:  This is a different digest than the one specified by [TCG06b].)  The EFI_VARIABLE_DATA.UnicodeNameLength value is the number of CHAR16 characters (not the number of bytes).  The EFI_VARIABLE_DATA.UnicodeName contents MUST NOT include a null terminator.  If reading the EFI variable returns EFI_NOT_FOUND, the EFI_VARIABLE_DATA.VariableDataLength field MUST be set to zero and EFI_VARIABLE_DATA.VariableData field will have a size of zero.</p>
        <ol class="ordered">
          <li>
							If the platform provides a firmware debugger mode which may be used prior to the UEFI environment or if the platform provides a debugger for the UEFI environment, then the platform SHALL extend an EV_EFI_ACTION event as specified in [TCG06b] into PCR[7] before allowing use of the debugger. The event string shall be “UEFI Debug Mode”. Further, the platform MUST create a TCG Event Log entry as follows:<br /><br /><ol class="ordered"><li>
									TCG_PCR_EVENT.PCRIndex = 7<br /><br /></li><li>
									TCG_PCR_EVENT.EventType = EV_EFI_ACTION<br /><br /></li><li>
									TCG_PCR_EVENT.Digest = &lt;the SHA-1 digest of the string value “UEFI Debug Mode” without the terminating NULL character&gt;<br /><br /></li><li>
									TCG_PCR_EVENT.EventSize = strlen(“UEFI Debug Mode”)<br /><br /></li><li>
									TCG_PCR_EVENT.Event = “UEFI Debug Mode”<br /><br /></li></ol>
							The platform MAY build similar event log entries for other supported Event Log formats.<br /><br /></li>
          <li>
							Before executing any code not cryptographically authenticated as being provided by the Platform Manufacturer, the Platform Manufacturer firmware MUST measure the following values in the order listed using the EV_EFI_VARIABLE_DRIVER_CONFIG event type to PCR[7]:<br /><br /><ol class="ordered"><li>
									SecureBoot variable value<br /><br /></li><li>
									The PK variable value<br /><br /></li><li>
									The KEK variable value<br /><br /></li><li>
									The EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE variable value<br /><br /></li><li>
									The EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE1 variable value<br /><br /></li></ol></li>
          <li>
							If the platform supports changing any of the following UEFI policy variables after they are initially measured in PCR[7] and before <strong>ExitBootServices ( )</strong> has completed without unconditionally restarting the platform, it MUST measure the variable again immediately upon change.  Additionally the normal update process for setting any of the UEFI variables below MUST occur before the initial measurement in PCR[7] or after the call to <strong>ExitBootServices()</strong> has completed.<br /><br /><ol class="ordered"><li>
									SecureBoot variable value<br /><br /></li><li>
									The PK variable value<br /><br /></li><li>
									The KEK variable value<br /><br /></li><li>
									The EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE variable value<br /><br /></li><li>
									The EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE1 variable value<br /><br /></li></ol></li>
          <li>
							The system SHALL measure the EV_SEPARATOR event in PCR[7].  (This occurs at the same time the separator is measured to PCR[0] through PCR[7].)<br /><br /></li>
          <li>
							Before launching an EFI Driver or an EFI Boot Application (and regardless of whether the launch is due to the EFI Boot Manager picking an image from the DriverOrder or BootOrder UEFI variables or an already launched image calling the UEFI LoadImage() function), the UEFI firmware SHALL measure the entry in the EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE variable that was used to validate the EFI image into PCR[7]. The measurement SHALL occur in conjunction with image load. For this event, the EventType shall be EV_EFI_VARIABLE_AUTHORITY and the Event value shall be the value of the EFI_VARIABLE_DATA structure (the structure is defined above in this specification with a different definition than the TCG specification). The EFI_VARIABLE_DATA.VariableData value shall be the EFI_SIGNATURE_DATA value from the EFI_SIGNATURE_LIST that contained the authority that was used to validate the image and the EFI_VARIABLE_DATA.VariableName shall be set to EFI_IMAGE_SECURITY_DATABASE_GUID. The EFI_VARIABLE_DATA.UnicodeName shall be set to the value of EFI_IMAGE_SECURITY_DATABASE. The value shall not include the terminating NULL character.<br /><br /></li>
          <li>
							Before launching any additional EFI Drivers or EFI Boot Applications, the UEFI firmware SHALL check if the entry in the EFI_IMAGE_SECURITY_DATABASE_GUID/EFI_IMAGE_SECURITY_DATABASE variable which validates the EFI image has previously been measured with the EV_EFI_VARIABLE_AUTHORITY event type in PCR[7].  If it has not been, it MUST be measured as described in the previous step.  If it has been measured previously, it MUST NOT be measured again.<br /><br /></li>
        </ol>
        <div class="alert">
          <table>
            <tr>
              <th align="left">
                <img id="note" alt="note" src="http://i.msdn.microsoft.com/areas/global/content/clear.gif" title="note" xmlns="" class="cl_IC101471" />Note </th>
            </tr>
            <tr>
              <td>
						A measurement example for PCR[7] measurements is available upon request from Microsoft.<p></p></td>
            </tr>
          </table>
          <p>
            
          </p>
        </div>
      </div>
    </div>
    <p>
      
    </p>
  </div>
</div></div>

    




<div class="libraryMemberFilter">
    <div class="filterContainer">
        <span>Show:</span>
        <label>
            <input type="checkbox" class="libraryFilterInherited" checked="checked" value="Inherit" />Inherited
        </label>
        <label>
            <input type="checkbox" class="libraryFilterProtected" checked="checked" value="Protected" />Protected
        </label>
    </div>
</div>
    
<input type="hidden" id="libraryMemberFilterEmptyWarning" value="There are no members available with your current filter settings." />


 
</div>




            </div>
            <div class="clear"></div>
        
            
    
<input name="__RequestVerificationToken" type="hidden" value="D_xz-EBW3g3vdv8uAwR_aFly9MOycTm2t3MyA5F-S-KFbf-4bcdtOJ1b_jCQ400khourpy6xvXBag3bf-Pzu7EftFA7GvhSDA2MjRiZBQPREZffrrdSTlEUKtt83RqRy_CneVg2" />
<input id="ratingSubmitUrl" type="hidden" value="http://msdn.microsoft.com/en-us/library/feedback/add/jj923068.aspx" />
<input id="isTopicRated" type="hidden" value="false" />




    


    <div id="ux-footer" class=" ltr">
        
            <div id="footerSock">
                <div id="footerSockInner">
                    <a name="feedback"></a>
                    <div data-fragmentName="Survey" id="Fragment_Survey" xmlns="http://www.w3.org/1999/xhtml">
  <div class="DetailedLink">
    
    <div class="Content"></div>
  </div>
</div>
<div class="rating">
    <div id="ratingSection1">
        <div class="title">
            Was this page helpful?
        </div>
        <div class="description">
            Your feedback about this content is important.<br />Let us know what you think.
        </div>
        <div class="buttons">
            <button id="ratingYes">Yes</button>
            <button id="ratingNo">No</button>
        </div>
        <input id="ratingValue" type="hidden" value="" />
    </div>
    <div id="ratingSection2">
        <div class="title">
            Additional feedback?
        </div>
        <textarea id="ratingText" rows="6" cols=""></textarea>
        <div class="buttons">
            <button id="ratingSubmit">Submit</button>
            <button id="ratingSkipThis">Skip this</button>
        </div>
    </div>
    <div id="ratingSection3">
        <div class="title">
            Thank you!
        </div>
        <div class="description">
            We appreciate your feedback.
        </div>
    </div>
    
    
    <div id="contentFeedbackQAContainer" style="display: none;"></div>
</div>


                    <div data-fragmentName="SockLinks" id="Fragment_SockLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317805" id="SockLinks_727_11" xmlns="http://www.w3.org/1999/xhtml">Find us on Facebook</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?LinkId=317806" id="SockLinks_727_12" xmlns="http://www.w3.org/1999/xhtml">Follow us on Twitter</a>
        </li>
        <li>
          <a href="http://go.microsoft.com/fwlink/p/?linkid=285656" id="SockLinks_727_40" xmlns="http://www.w3.org/1999/xhtml">Read the hardware blog</a>
        </li>
      </ul>
    </div>
  </div>
</div>
                    <div class="clear"></div>
                </div>
            </div>
        <div id="footerContainer">
            <div id="fourColumnFooter">
                <div data-fragmentName="Column1" id="Fragment_Column1" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Centers</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://msdn.microsoft.com/windows" id="Column1_727_13" xmlns="http://www.w3.org/1999/xhtml">Dev Center Home</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/apps" id="Column1_727_14" xmlns="http://www.w3.org/1999/xhtml">Windows Store apps</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/ie" id="Column1_727_15" xmlns="http://www.w3.org/1999/xhtml">Internet Explorer</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/desktop" id="Column1_727_16" xmlns="http://www.w3.org/1999/xhtml">Desktop</a>
          </li>
          <li>
            <a href="http://msdn.microsoft.com/windows/hardware" id="Column1_727_17" xmlns="http://www.w3.org/1999/xhtml">Hardware</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column2" id="Fragment_Column2" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Related developer sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285634" id="Column2_727_18" xmlns="http://www.w3.org/1999/xhtml">Microsoft Connect</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285635" id="Column2_727_19" xmlns="http://www.w3.org/1999/xhtml">OSR Online</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282089" id="Column2_727_42" xmlns="http://www.w3.org/1999/xhtml">Visual Studio</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=280293" id="Column2_727_20" xmlns="http://www.w3.org/1999/xhtml">Windows Phone</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=282087" id="Column2_727_43" xmlns="http://www.w3.org/1999/xhtml">Windows Server</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Other Windows sites</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285636" id="Column2_727_21" xmlns="http://www.w3.org/1999/xhtml">Enterprise</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285637" id="Column2_727_22" xmlns="http://www.w3.org/1999/xhtml">Small business</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285638" id="Column2_727_23" xmlns="http://www.w3.org/1999/xhtml">Students</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285639" id="Column2_727_24" xmlns="http://www.w3.org/1999/xhtml">Home users</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column3" id="Fragment_Column3" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Downloads</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285645" id="Column3_727_25" xmlns="http://www.w3.org/1999/xhtml">Windows Driver Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285646" id="Column3_727_26" xmlns="http://www.w3.org/1999/xhtml">Windows Assessment and Deployment Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285647" id="Column3_727_27" xmlns="http://www.w3.org/1999/xhtml">Windows Hardware Certification Kit</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?LinkID=316548" id="Column3_727_29" xmlns="http://www.w3.org/1999/xhtml">Visual Studio Professional 2013</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285649" id="Column3_727_30" xmlns="http://www.w3.org/1999/xhtml">More downloads</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Support</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285664" id="Column3_727_44" xmlns="http://www.w3.org/1999/xhtml">Forums</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285663" id="Column3_727_45" xmlns="http://www.w3.org/1999/xhtml">More support options</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
                <div data-fragmentName="Column4" id="Fragment_Column4" xmlns="http://www.w3.org/1999/xhtml">
  <div class="ListOfLinkLists">
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Essentials</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285650" id="Column4_727_46" xmlns="http://www.w3.org/1999/xhtml">Recently published</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285651" id="Column4_727_47" xmlns="http://www.w3.org/1999/xhtml">Debugging</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=328186" id="Column4_727_48" xmlns="http://www.w3.org/1999/xhtml">Samples</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285653" id="Column4_727_49" xmlns="http://www.w3.org/1999/xhtml">Hardware dashboard</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=317804" id="Column4_727_50" xmlns="http://www.w3.org/1999/xhtml">Partner with Microsoft</a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="LinkList" xmlns="http://www.w3.org/1999/xhtml">
      <div class="LinkListTitle">Stay connected</div>
      <div class="Links">
        <ul class="LinkColumn" style="width: 100%">
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=285658" id="Column4_727_36" xmlns="http://www.w3.org/1999/xhtml">Microsoft events</a>
          </li>
          <li>
            <a href="http://go.microsoft.com/fwlink/p/?linkid=313299" id="Column4_727_37" xmlns="http://www.w3.org/1999/xhtml">Windows App Builder Blog</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>              
            </div>

            <div id="baseFooterLogos">
                <span class="microsoftlogo" title="Microsoft"></span>
                <a href="http://msdn.microsoft.com/en-us" class="msdnlogo" title="MSDN"></a>
            </div>
        
            <div id="baseFooter">
                <div id="FooterCopyright">© 2014 Microsoft</div>
                <div data-fragmentName="BaseFooterContent" id="Fragment_BaseFooterContent" xmlns="http://www.w3.org/1999/xhtml">
  <div xmlns="http://www.w3.org/1999/xhtml">
    <div xmlns:mtps="http://msdn2.microsoft.com/mtps">
      <div data-fragmentName="BaseFooter" id="Fragment_BaseFooter">
        
        <div class="LinkList">
          <div class="Links">
            <ul class="LinkColumn horizontal">
              <li>
                <a href="http://msdn.microsoft.com/windows/apps/cc300389" id="BaseFooter_35351_1" xmlns="http://www.w3.org/1999/xhtml">Terms of Use</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx" id="BaseFooter_35351_2" xmlns="http://www.w3.org/1999/xhtml">Trademarks</a>
              </li>
              <li>
                <a href="http://www.microsoft.com/info/privacy.mspx" id="BaseFooter_35351_3" xmlns="http://www.w3.org/1999/xhtml">Privacy and Cookies</a>
              </li>
              <li>
                <a href="http://msdn.microsoft.com/en-us/windows/dn554289" id="BaseFooter_730_5" xmlns="http://www.w3.org/1999/xhtml">Site map</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div data-fragmentName="HelloText" id="Fragment_HelloText">Hello from Seattle.
</div>
    </div>
  </div>
</div>  
                    <form class="selectLocale" id="selectLocaleForm" action="http://msdn.microsoft.com/en-us/windows/hardware/SelectLocale">
        <input type="hidden" name="fromPage" value="http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fhardware%2fjj923068.aspx" />
        <a href="#" onclick="$('#selectLocaleForm').submit();return false;" title="Change your language">United States (English)</a>
    </form>    


                <div class="clear"></div>
            </div>
        </div>
    </div> 


            <div class="footerPrintView">
                <div class="footerCopyrightPrintView">© 2014 Microsoft. All rights reserved.</div>
            </div>

            
            
    


        
            <input id="MtpsDevice" type="hidden" value="Default" />


<![CDATA[ Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx. ]]>
        
            
            
            
            
            
        





<noscript><div><img alt="DCSIMG" id="Img1" width="1" height="1" src="http://m.webtrends.com/dcsmgru7m99k7mqmgrhudo0k8_8c6m/njs.gif?dcsuri=/nojavascript&amp;WT.js=No" /></div></noscript>









<noscript>
  <a href="http://www.omniture.com/" title="Web Analytics">
    <img src="http://msstonojsmsdn.112.2o7.net/b/ss/msstonojsmsdn/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" />
  </a>
</noscript>




<div id="globalRequestVerification">
    <input name="__RequestVerificationToken" type="hidden" value="UaffjC3sx721CS08z4t-NQCz-Yp56WQlulWJtlSVAjk-dWnMG8aLt7-Qe5CaOXm6KsHQgbEhjKHr6EKeM9Ep6xDipZnDz402zXvTUJPvsP2mpJ4CAIJUf2_LkYzXy9X_C_YxZg2" />
</div>


        </div>
    <script type="text/javascript" class="mtps-injected">
/*<![CDATA[*/
(function(window,document){"use strict";function preload(scripts){for(var result=[],script,e,i=0;i<scripts.length;i++)script=scripts[i],script.hasOwnProperty("url")&&(e=document.createElement("script"),e.src=script.url,script.throwaway=e),result.push(script);return result}function inject(scripts,index){var script,elem;if(index>=scripts.length){delete mtps.injectScripts;return}script=scripts[index];elem=document.createElement("script");elem.className="mtps-injected";elem.async=!1;var isLoaded=!1,timeoutId=0,injectNextFnName="",injectNext=elem.onerror=function(){isLoaded||(isLoaded=!0,inject(scripts,index+1),window.clearTimeout(timeoutId),elem.onload=elem.onerror=elem.onreadystatechange=null,injectNextFnName&&delete mtps[injectNextFnName],elem.removeEventListener&&elem.removeEventListener("load",injectNext,!1))};elem.addEventListener?elem.addEventListener("load",injectNext,!1):elem.readyState==="uninitialized"?elem.onreadystatechange=function(){(this.readyState==="loaded"||this.readyState==="complete")&&injectNext()}:elem.onload=injectNext;script.hasOwnProperty("url")?(timeoutId=window.setTimeout(injectNext,12e4),elem.src=script.url):(injectNextFnName="_injectNextScript_"+index,mtps[injectNextFnName]=injectNext,timeoutId=window.setTimeout(injectNext,2e3),elem.text="try {\n"+script.txt+"\n} finally { MTPS."+injectNextFnName+" && MTPS."+injectNextFnName+"(); }");parent.appendChild(elem)}var mtps=window.MTPS||(window.MTPS={}),parent=document.getElementsByTagName("head")[0];mtps.injectScripts=function(scripts){inject(preload(scripts),0)}})(window,document);
MTPS.injectScripts([
	{ txt: "/**/\r\n(window.MTPS || (window.MTPS = {})).cdnDomains || (window.MTPS.cdnDomains = { \r\n\t\"image\": \"http://i.msdn.microsoft.com\", \r\n\t\"js\": \"http://i2.msdn.microsoft.com\", \r\n\t\"css\": \"http://i3.msdn.microsoft.com\"\r\n});\r\n/**/" },
	{ url: "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js" },
	{ txt: "//\n  var literalNormalizedUrl = \u0027/en-us/library/windows/hardware/jj923068(d=default,l=en-us,v=win.10).aspx\u0027;\n  var wt_nvr_ru = \u0027WT_NVR_RU\u0027;\n  var wt_fpcdom = \u0027.microsoft.com\u0027;\n  var wt_domlist = \u0027msdn.microsoft.com\u0027;\n  var wt_pathlist = \u0027\u0027;\n  var wt_paramlist = \u0027DCSext.mtps_devcenter\u0027;\n  var wt_siteid = \u0027MSDN\u0027;\n  var gDomain = \u0027m.webtrends.com\u0027;\n  var gDcsId = \u0027dcsmgru7m99k7mqmgrhudo0k8_8c6m\u0027;\n  var gFpc = \u0027WT_FPC\u0027;\n\n\n\n  if (document.cookie.indexOf(gFpc + \"=\") == -1) {\n    var wtidJs = document.createElement(\"script\");\n    wtidJs.src = \"//\" + gDomain + \"/\" + gDcsId + \"/wtid.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(wtidJs);\n  }\n\n\n\n  var detectedLocale = \u0027en-us\u0027;\n  var wtsp = \u0027_msdn_\u0027;\n  var gTrackEvents = \u00270\u0027;\n/**/" },
	{ txt: "/**/\n  var omni_guid = \"63b99190-5c63-4142-bf14-bf4af65cccef\";\n/**/" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Utilities,0:Topic,1:webtrendsscript,2:omni_rsid_MSDN,3:SearchBox;/Areas/Epx/Content/Scripts:0,/Areas/Global/Content/Webtrends/resources:1,/Areas/Global/Content/Omniture/resources/MSDN:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=E93F43E708C4E79B13014A098239D120" },
	{ url: "http://i1.services.social.microsoft.com/search/Widgets/SearchBox.jss?boxid=HeaderSearchTextBox\u0026btnid=HeaderSearchButton\u0026brand=MSDN\u0026loc=en-us\u0026Refinement=182\u0026focusOnInit=false\u0026iroot=windows%2fhardware\u0026emptyWatermark=true\u0026searchButtonTooltip=Search" },
	{ url: "http://i2.msdn.microsoft.com/Combined.js?resources=0:Header,1:Toc,1:NavigationResize,1:LibraryMemberFilter,2:Toc_Fixed,3:Rating,2:CodeSnippet,2:TopicNotInScope,2:CollapsibleArea,2:VersionSelector,2:SurveyBroker;/Areas/Epx/Themes/Windows/Content:0,/Areas/Library/Content:1,/Areas/Epx/Content/Scripts:2,/Areas/Epx/Themes/Base/Content:3\u0026amp;hashKey=6A874F42A61252C549AE8222B0CA65F4" },
	{ txt: "$(document).ready(function() {\n        try {\n            var token = $(\"#globalRequestVerification input[name=\u0027__RequestVerificationToken\u0027]\").clone();\n            $(\"#siteFeedbackForm\").append(token);\n        } catch(err) {\n            \n        }\n    });" }
]);

/*]]>*/
</script></body>

<!-- Mirrored from msdn.microsoft.com/en-us/library/windows/hardware/jj923068.aspx by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 17 Mar 2014 17:16:10 GMT -->
</html>